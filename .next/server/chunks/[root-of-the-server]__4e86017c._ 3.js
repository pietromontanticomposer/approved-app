module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},30901,84076,e=>{"use strict";let t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,r=function(e){return"string"==typeof e&&t.test(e)};e.s(["default",0,r],84076);let n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function a(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}e.s(["default",0,function(e,t=0){let n=a(e,t);if(!r(n))throw TypeError("Stringified UUID is invalid");return n},"unsafeStringify",()=>a],30901)},66680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},95638,e=>{"use strict";var t=e.i(66680);let r=new Uint8Array(256),n=r.length;function a(){return n>r.length-16&&((0,t.randomFillSync)(r),n=0),r.slice(n,n+=16)}e.s(["default",()=>a])},93266,e=>{"use strict";let t={randomUUID:e.i(66680).randomUUID};e.s(["default",0,t])},5499,e=>{"use strict";var t=e.i(93266),r=e.i(95638),n=e.i(30901);e.s(["default",0,function(e,a,s){if(t.default.randomUUID&&!a&&!e)return t.default.randomUUID();var i=e,o=s;let l=(i=i||{}).random??i.rng?.()??(0,r.default)();if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,a){if((o=o||0)<0||o+16>a.length)throw RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[o+e]=l[e];return a}return(0,n.unsafeStringify)(l)}])},77583,e=>{"use strict";e.s([],13440),e.i(13440);var t=e.i(84076);let r=function(e){let r;if(!(0,t.default)(e))throw TypeError("Invalid UUID");return Uint8Array.of((r=parseInt(e.slice(0,8),16))>>>24,r>>>16&255,r>>>8&255,255&r,(r=parseInt(e.slice(9,13),16))>>>8,255&r,(r=parseInt(e.slice(14,18),16))>>>8,255&r,(r=parseInt(e.slice(19,23),16))>>>8,255&r,(r=parseInt(e.slice(24,36),16))/0x10000000000&255,r/0x100000000&255,r>>>24&255,r>>>16&255,r>>>8&255,255&r)};var n=e.i(30901),a=e.i(95638);let s={};function i(e,t,r,n,a,s,o=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(s){if(o<0||o+16>s.length)throw RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`)}else s=new Uint8Array(16),o=0;t??=Date.now(),r??=0,n??=(e[8]<<8|e[9])&16383,a??=e.slice(10,16);let l=((0xfffffff&(t+=122192928e5))*1e4+r)%0x100000000;s[o++]=l>>>24&255,s[o++]=l>>>16&255,s[o++]=l>>>8&255,s[o++]=255&l;let d=t/0x100000000*1e4&0xfffffff;s[o++]=d>>>8&255,s[o++]=255&d,s[o++]=d>>>24&15|16,s[o++]=d>>>16&255,s[o++]=n>>>8|128,s[o++]=255&n;for(let e=0;e<6;++e)s[o++]=a[e];return s}let o=function(e,t,r){let o,l=e?._v6??!1;if(e){let t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)o=i(e.random??e.rng?.()??(0,a.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,r);else{var d,u,f;let e=Date.now(),n=(0,a.default)();d=s,u=e,f=n,d.msecs??=-1/0,d.nsecs??=0,u===d.msecs?(d.nsecs++,d.nsecs>=1e4&&(d.node=void 0,d.nsecs=0)):u>d.msecs?d.nsecs=0:u<d.msecs&&(d.node=void 0),d.node||(d.node=f.slice(10,16),d.node[0]|=1,d.clockseq=(f[8]<<8|f[9])&16383),d.msecs=u,o=i(n,s.msecs,s.nsecs,l?void 0:s.clockseq,l?void 0:s.node,t,r)}return t??(0,n.unsafeStringify)(o)};function l(e){var t;let a=(t="string"==typeof e?r(e):e,Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,n.unsafeStringify)(a):a}var d=e.i(66680);let u=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,d.createHash)("md5").update(e).digest()},f="6ba7b810-9dad-11d1-80b4-00c04fd430c8",c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function p(e,t,a,s,i,o){let l="string"==typeof a?function(e){let t=new Uint8Array((e=unescape(encodeURIComponent(e))).length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}(a):a,d="string"==typeof s?r(s):s;if("string"==typeof s&&(s=r(s)),s?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+l.length);if(u.set(d),u.set(l,d.length),(u=t(u))[6]=15&u[6]|e,u[8]=63&u[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=u[e];return i}return(0,n.unsafeStringify)(u)}function m(e,t,r,n){return p(48,u,e,t,r,n)}m.DNS=f,m.URL=c;var h=e.i(5499);let g=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,d.createHash)("sha1").update(e).digest()};function y(e,t,r,n){return p(80,g,e,t,r,n)}function _(e){var t;let a=(t="string"==typeof e?r(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,n.unsafeStringify)(a):a}y.DNS=f,y.URL=c;let x={};function w(e,t,r,n,a=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(n){if(a<0||a+16>n.length)throw RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`)}else n=new Uint8Array(16),a=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[a++]=t/0x10000000000&255,n[a++]=t/0x100000000&255,n[a++]=t/0x1000000&255,n[a++]=t/65536&255,n[a++]=t/256&255,n[a++]=255&t,n[a++]=112|r>>>28&15,n[a++]=r>>>20&255,n[a++]=128|r>>>14&63,n[a++]=r>>>6&255,n[a++]=r<<2&255|3&e[10],n[a++]=e[11],n[a++]=e[12],n[a++]=e[13],n[a++]=e[14],n[a++]=e[15],n}e.s(["MAX",0,"ffffffff-ffff-ffff-ffff-ffffffffffff","NIL",0,"00000000-0000-0000-0000-000000000000","parse",0,r,"stringify",()=>n.default,"v1",0,o,"v1ToV6",()=>l,"v3",0,m,"v4",()=>h.default,"v5",0,y,"v6",0,function(e,t,r){r??=0;let a=o({...e??={},_v6:!0},new Uint8Array(16));if(a=l(a),t){for(let e=0;e<16;e++)t[r+e]=a[e];return t}return(0,n.unsafeStringify)(a)},"v6ToV1",()=>_,"v7",0,function(e,t,r){let s;if(e)s=w(e.random??e.rng?.()??(0,a.default)(),e.msecs,e.seq,t,r);else{var i,o,l;let e=Date.now(),n=(0,a.default)();i=x,o=e,l=n,i.msecs??=-1/0,i.seq??=0,o>i.msecs?(i.seq=l[6]<<23|l[7]<<16|l[8]<<8|l[9],i.msecs=o):(i.seq=i.seq+1|0,0===i.seq&&i.msecs++),s=w(n,x.msecs,x.seq,t,r)}return t??(0,n.unsafeStringify)(s)},"validate",()=>t.default,"version",0,function(e){if(!(0,t.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}],77583)},44687,e=>{"use strict";var t=e.i(72195);let r="https://waaigankcctijalvlppk.supabase.co",n=process.env.SUPABASE_SERVICE_ROLE_KEY,a=null;if(r&&n)a=(0,t.createClient)(r,n,{auth:{persistSession:!1}});else if("1"===process.env.APP_ALLOW_FAKE_SUPABASE){let t={projects:[{id:"p1",team_id:"t1",owner_id:"owner-1",name:"Test Project"}],share_links:[],project_members:[],team_members:[{team_id:"t1",user_id:"owner-1",role:"owner"}],audit_logs:[]},{v4:r}=e.r(77583);a={from:e=>{let n;return n={_table:e,_select:"*",_where:[],_limit:null,select:e=>(n._select=e||"*",n),eq:(e,t)=>(n._where.push({k:e,v:t}),n),limit:e=>(n._limit=e,n),maybeSingle:async()=>{let r=(t[e]||[]).filter(e=>n._where.every(t=>String(e[t.k])===String(t.v)));return{data:r.length>0?JSON.parse(JSON.stringify(r[0])):null,error:null}},insert:n=>{let a=t[e]||(t[e]=[]),s=(Array.isArray(n)?n:[n]).map(e=>{let t=Object.assign({},e);return t.id||(t.id=r()),t.created_at=new Date().toISOString(),a.push(t),t});return{data:s,error:null,select:()=>({single:async()=>({data:s[0],error:null})})}},update:r=>({eq:async(a,s)=>{let i=t[e]||[],o=0;for(let e of i)n._where.every(t=>String(e[t.k])===String(t.v))&&String(e[a])===String(s)&&(Object.assign(e,r),o++);return{data:o>0?i.filter(e=>n._where.every(t=>String(e[t.k])===String(t.v))&&String(e[a])===String(s)):[],error:null}}}),upsert:async(n,a)=>{let s=t[e]||(t[e]=[]),i=s.find(e=>e.project_id===n.project_id&&e.member_id===n.member_id);if(i)return Object.assign(i,n),{data:[i],error:null};let o=Object.assign({},n);return o.id||(o.id=r()),s.push(o),{data:[o],error:null}},single:async()=>({data:(t[e]||[]).filter(e=>n._where.every(t=>String(e[t.k])===String(t.v)))[0]||null,error:null})}}}}else throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY in environment. Set APP_ALLOW_FAKE_SUPABASE=1 to enable a local fake client for tests.");e.s(["supabaseAdmin",()=>a])},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},95568,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),a=e.i(59756),s=e.i(61916),i=e.i(14444),o=e.i(37092),l=e.i(69741),d=e.i(16795),u=e.i(87718),f=e.i(95169),c=e.i(47587),p=e.i(66012),m=e.i(70101),h=e.i(26937),g=e.i(10372),y=e.i(93695);e.i(52474);var _=e.i(5232),x=e.i(89171),w=e.i(44687),v=e.i(54799);async function b(e){try{let t=await e.text();if(!t)return x.NextResponse.json({error:"Empty body"},{status:400});let r=JSON.parse(t),n="string"==typeof r.project_id?r.project_id:"",a="string"==typeof r.role?r.role:"view",s="string"==typeof r.expires_at?r.expires_at:null,i="number"==typeof r.max_uses?r.max_uses:null,o=e.headers.get("x-actor-id");try{let t=e.headers.get("authorization")||"";if(t.toLowerCase().startsWith("bearer ")){let e=t.split(" ")[1];if(e){let{data:t,error:r}=await w.supabaseAdmin.auth.getUser(e);!r&&t?.user?.id?o=t.user.id:console.warn("[/api/projects/share] auth.getUser failed",r)}}}catch(e){console.warn("[/api/projects/share] token verification error",e)}if(!o)return x.NextResponse.json({error:"Missing x-actor-id header or Authorization token"},{status:403});if(!n)return x.NextResponse.json({error:"project_id is required"},{status:400});let{data:l,error:d}=await w.supabaseAdmin.from("projects").select("id, team_id, owner_id").eq("id",n).maybeSingle();if(d||!l)return x.NextResponse.json({error:"Project not found"},{status:404});let u=!1;if(l.owner_id&&l.owner_id===o&&(u=!0),!u){let{data:e}=await w.supabaseAdmin.from("project_members").select("role").eq("project_id",n).eq("member_id",o).limit(1);e&&e.length>0&&("owner"===e[0].role||"manage"===e[0].role)&&(u=!0)}if(!u&&!l.owner_id&&l.team_id)try{let{data:e}=await w.supabaseAdmin.from("team_members").select("user_id, role").eq("team_id",l.team_id).eq("role","owner").limit(1),t=Array.isArray(e)?e[0]:e;t&&t.user_id===o&&(u=!0)}catch(e){console.warn("[/api/projects/share] team owner lookup failed",e)}if(!u){console.warn("[/api/projects/share] Forbidden: actor not authorized",{actorId:o,projectOwner:l.owner_id});let{data:e}=await w.supabaseAdmin.from("project_members").select("member_id,role").eq("project_id",n);return console.warn("[/api/projects/share] project_members for project",n,e||[]),x.NextResponse.json({error:"Forbidden"},{status:403})}let f=v.default.randomBytes(32).toString("base64url"),c=v.default.createHash("sha256").update(f).digest("hex"),p={project_id:n,role:a,token_hash:c,created_by:o,expires_at:s,max_uses:i},{data:m,error:h}=await w.supabaseAdmin.from("share_links").insert(p).select().single();if(h)return x.NextResponse.json({error:h.message},{status:500});e.headers.get("origin"),e.headers.get("x-forwarded-proto"),e.headers.get("host");let g="https://approved-app-pietros-projects-7763063d.vercel.app".replace(/\/+$/,""),y=String(f||"").trim(),_=`${g}/share/${m.id}?token=${encodeURIComponent(y)}`;return await w.supabaseAdmin.from("audit_logs").insert({actor_id:o,action:"share_link_created",target_type:"project",target_id:n,meta:{share_link_id:m.id,role:a}}),x.NextResponse.json({id:m.id,link:_},{status:201})}catch(e){return console.error("[POST /api/projects/share] Error",e),x.NextResponse.json({error:e?.message||"Unexpected error"},{status:500})}}async function R(e){try{let t=await e.text();if(!t)return x.NextResponse.json({error:"Empty body"},{status:400});let r=JSON.parse(t),n="string"==typeof r.id?r.id:"",a=e.headers.get("x-actor-id");if(!a)return x.NextResponse.json({error:"Missing x-actor-id header"},{status:403});if(!n)return x.NextResponse.json({error:"id is required"},{status:400});let{data:s,error:i}=await w.supabaseAdmin.from("share_links").select("id, project_id, created_by").eq("id",n).maybeSingle();if(i||!s)return x.NextResponse.json({error:"Share link not found"},{status:404});let{data:o}=await w.supabaseAdmin.from("projects").select("owner_id").eq("id",s.project_id).maybeSingle(),l=!1;if(o?.owner_id===a&&(l=!0),!l){let{data:e}=await w.supabaseAdmin.from("project_members").select("role").eq("project_id",s.project_id).eq("member_id",a).limit(1);e&&e.length>0&&("owner"===e[0].role||"manage"===e[0].role)&&(l=!0)}if(!l)return x.NextResponse.json({error:"Forbidden"},{status:403});let{error:d}=await w.supabaseAdmin.from("share_links").update({revoked_at:new Date().toISOString()}).eq("id",n);if(d)return x.NextResponse.json({error:d.message},{status:500});return await w.supabaseAdmin.from("audit_logs").insert({actor_id:a,action:"share_link_revoked",target_type:"share_link",target_id:n,meta:null}),x.NextResponse.json({success:!0},{status:200})}catch(e){return console.error("[DELETE /api/projects/share] Error",e),x.NextResponse.json({error:e?.message||"Unexpected error"},{status:500})}}e.s(["DELETE",()=>R,"POST",()=>b],94633);var A=e.i(94633);let E=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/projects/share/route",pathname:"/api/projects/share",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/projects/share/route.ts",nextConfigOutput:"",userland:A}),{workAsyncStorage:j,workUnitAsyncStorage:S,serverHooks:U}=E;function k(){return(0,n.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:S})}async function N(e,t,n){E.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let x="/api/projects/share/route";x=x.replace(/\/index$/,"")||"/";let w=await E.prepare(e,t,{srcPage:x,multiZoneDraftMode:!1});if(!w)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:v,params:b,nextConfig:R,parsedUrl:A,isDraftMode:j,prerenderManifest:S,routerServerContext:U,isOnDemandRevalidate:k,revalidateOnlyGenerated:N,resolvedPathname:q,clientReferenceManifest:C,serverActionsManifest:I}=w,O=(0,l.normalizeAppPath)(x),P=!!(S.dynamicRoutes[O]||S.routes[q]),T=async()=>((null==U?void 0:U.render404)?await U.render404(e,t,A,!1):t.end("This page could not be found"),null);if(P&&!j){let e=!!S.routes[q],t=S.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await T();throw new y.NoFallbackError}}let D=null;!P||E.isDev||j||(D="/index"===(D=q)?"/":D);let H=!0===E.isDev||!P,L=P&&!H;I&&C&&(0,i.setReferenceManifestsSingleton)({page:x,clientReferenceManifest:C,serverActionsManifest:I,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:I})});let M=e.method||"GET",$=(0,s.getTracer)(),B=$.getActiveScopeSpan(),F={params:b,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>E.onRequestError(e,t,n,U)},sharedContext:{buildId:v}},K=new d.NodeNextRequest(e),V=new d.NodeNextResponse(t),W=u.NextRequestAdapter.fromNodeNextRequest(K,(0,u.signalFromNodeResponse)(t));try{let i=async e=>E.handle(W,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=$.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==f.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${M} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${x}`)}),o=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var s,l;let d=async({previousCacheEntry:r})=>{try{if(!o&&k&&N&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(a);e.fetchMetrics=F.renderOpts.fetchMetrics;let l=F.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let d=F.renderOpts.collectedTags;if(!P)return await (0,p.sendResponse)(K,V,s,F.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(s.headers);d&&(t[g.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,n=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:_.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await E.onRequestError(e,t,{routerKind:"App Router",routePath:x,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:k})},U),t}},u=await E.handleResponse({req:e,nextConfig:R,cacheKey:D,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:N,responseGenerator:d,waitUntil:n.waitUntil,isMinimalMode:o});if(!P)return null;if((null==u||null==(s=u.value)?void 0:s.kind)!==_.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",k?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),j&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,m.fromNodeOutgoingHttpHeaders)(u.value.headers);return o&&P||f.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,p.sendResponse)(K,V,new Response(u.value.body,{headers:f,status:u.value.status||200})),null};B?await l(B):await $.withPropagatedContext(e.headers,()=>$.trace(f.BaseServerSpan.handleRequest,{spanName:`${M} ${x}`,kind:s.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},l))}catch(t){if(t instanceof y.NoFallbackError||await E.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:k})}),P)throw t;return await (0,p.sendResponse)(K,V,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>k,"routeModule",()=>E,"serverHooks",()=>U,"workAsyncStorage",()=>j,"workUnitAsyncStorage",()=>S],95568)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4e86017c._.js.map