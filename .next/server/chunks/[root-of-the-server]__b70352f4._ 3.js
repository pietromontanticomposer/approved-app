module.exports=[22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},4446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},55004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},60438,(e,t,r)=>{t.exports=e.x("perf_hooks",()=>require("perf_hooks"))},41099,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),a=e.i(59756),s=e.i(61916),i=e.i(14444),o=e.i(37092),l=e.i(69741),c=e.i(16795),u=e.i(87718),f=e.i(95169),p=e.i(47587),d=e.i(66012),m=e.i(70101),h=e.i(26937),g=e.i(10372),y=e.i(93695);e.i(52474);var w=e.i(5232),v=e.i(22734);e.i(14747);var b=e.i(89171),E=e.i(46786);let _=new Map,A=new Map,S=Symbol("OriginError"),O={};class x extends Promise{constructor(e,t,r,n,a={}){let s,i;super((e,t)=>{s=e,i=t}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=t,this.handler=r,this.canceller=n,this.options=a,this.state=null,this.statement=null,this.resolve=e=>(this.active=!1,s(e)),this.reject=e=>(this.active=!1,i(e)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[S]=this.handler.debug?Error():this.tagged&&function(e){if(_.has(e))return _.get(e);let t=Error.stackTraceLimit;return Error.stackTraceLimit=4,_.set(e,Error()),Error.stackTraceLimit=t,_.get(e)}(this.strings)}get origin(){return(this.handler.debug?this[S].stack:this.tagged&&A.has(this.strings)?A.get(this.strings):A.set(this.strings,this[S].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,t){let r;return(this.options.simple=!1,"function"==typeof e&&(t=e,e=1),this.cursorRows=e,"function"==typeof t)?(this.cursorFn=t,this):{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};r&&r();let e=new Promise((e,t)=>{this.cursorFn=t=>(e({value:t,done:!1}),new Promise(e=>r=e)),this.resolve=()=>(this.active=!1,e({done:!0})),this.reject=e=>(this.active=!1,t(e))});return this.execute(),e},return:()=>(r&&r(O),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}class R extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}}let P=function e(t,r,n){let{host:a,port:s}=n||r,i=Object.assign(Error("write "+t+" "+(r.path||a+":"+s)),{code:t,errno:t,address:r.path||a},r.path?{}:{port:s});return Error.captureStackTrace(i,e),i},N=function e(t){let r=new R(t);return Error.captureStackTrace(r,e),r},T=function e(t,r){let n=Object.assign(Error(t+": "+r),{code:t});return Error.captureStackTrace(n,e),n},C=function e(t){let r=Object.assign(Error(t+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:t});return Error.captureStackTrace(r,e),r};class I{then(){G()}catch(){G()}finally(){G()}}class B extends I{constructor(e){super(),this.value=Y(e)}}class U extends I{constructor(e,t,r){super(),this.value=e,this.type=t,this.array=r}}class k extends I{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,r,n){let a=H.map(([t,r])=>({fn:r,i:e.search(t)})).sort((e,t)=>e.i-t.i).pop();return -1===a.i?W(this.first,n):a.fn(this.first,this.rest,t,r,n)}}function j(e,t,r,n){let a=e instanceof U?e.value:e;if(void 0===a&&(e instanceof U?e.value=n.transform.undefined:a=e=n.transform.undefined,void 0===a))throw T("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+r.push(e instanceof U?(t.push(e.value),e.array?e.array[e.type||Z(e.value)]||e.type||function e(t){return Array.isArray(t)?e(t[0]):1009*("string"==typeof t)}(e.value):e.type):(t.push(e),Z(e)))}let D=Q({string:{to:25,from:null,serialize:e=>""+e},number:{to:0,from:[21,23,26,700,701],serialize:e=>""+e,parse:e=>+e},json:{to:114,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:16,serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1114,1184],serialize:e=>(e instanceof Date?e:new Date(e)).toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:17,serialize:e=>"\\x"+Buffer.from(e).toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}});function M(e,t,r,n,a,s){for(let i=1;i<e.strings.length;i++)t+=q(t,r,n,a,s)+e.strings[i],r=e.args[i];return t}function q(e,t,r,n,a){return t instanceof k?t.build(e,r,n,a):t instanceof x?$(t,r,n,a):t instanceof B?t.value:t&&t[0]instanceof x?t.reduce((e,t)=>e+" "+$(t,r,n,a),""):j(t,r,n,a)}function $(e,t,r,n){return e.fragment=!0,M(e,e.strings[0],e.args[0],t,r,n)}function L(e,t,r,n,a){return e.map(e=>"("+n.map(n=>q("values",e[n],t,r,a)).join(",")+")").join(",")}function F(e,t,r,n,a){let s=Array.isArray(e[0]),i=t.length?t.flat():Object.keys(s?e[0]:e);return L(s?e:[e],r,n,i,a)}function z(e,t,r,n,a){let s;return("string"==typeof e&&(e=[e].concat(t)),Array.isArray(e))?W(e,a):(t.length?t.flat():Object.keys(e)).map(t=>((s=e[t])instanceof x?$(s,r,n,a):s instanceof B?s.value:j(s,r,n,a))+" as "+Y(a.transform.column.to?a.transform.column.to(t):t)).join(",")}let H=Object.entries({values:F,in:(...e)=>{let t=F(...e);return"()"===t?"(null)":t},select:z,as:z,returning:z,"\\(":z,update:(e,t,r,n,a)=>(t.length?t.flat():Object.keys(e)).map(t=>Y(a.transform.column.to?a.transform.column.to(t):t)+"="+q("values",e[t],r,n,a)),insert(e,t,r,n,a){let s=t.length?t.flat():Object.keys(Array.isArray(e)?e[0]:e);return"("+W(s,a)+")values"+L(Array.isArray(e)?e:[e],r,n,s,a)}}).map(([e,t])=>[RegExp("((?:^|[\\s(])"+e+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),t]);function G(){throw T("NOT_TAGGED_CALL","Query not called as a tagged template literal")}let K=D.serializers,X=D.parsers,V=function(e){let t=Q(e||{});return{serializers:Object.assign({},K,t.serializers),parsers:Object.assign({},X,t.parsers)}};function Q(e){return Object.keys(e).reduce((t,r)=>(e[r].from&&[].concat(e[r].from).forEach(n=>t.parsers[n]=e[r].parse),e[r].serialize&&(t.serializers[e[r].to]=e[r].serialize,e[r].from&&[].concat(e[r].from).forEach(n=>t.serializers[n]=e[r].serialize)),t),{parsers:{},serializers:{}})}function W(e,{transform:{column:t}}){return e.map(e=>Y(t.to?t.to(e):e)).join(",")}let Y=function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},Z=function e(t){return t instanceof U?t.type:t instanceof Date?1184:t instanceof Uint8Array?17:!0===t||!1===t?16:"bigint"==typeof t?20:Array.isArray(t)?e(t[0]):0},J=/\\/g,ee=/"/g,et=function e(t,r,n,a){if(!1===Array.isArray(t))return t;if(!t.length)return"{}";let s=t[0],i=1020===a?";":",";return Array.isArray(s)&&!s.type?"{"+t.map(t=>e(t,r,n,a)).join(i)+"}":"{"+t.map(e=>{if(void 0===e&&void 0===(e=n.transform.undefined))throw T("UNDEFINED_VALUE","Undefined values are not allowed");return null===e?"null":'"'+(r?r(e.type?e.value:e):""+e).replace(J,"\\\\").replace(ee,'\\"')+'"'}).join(i)+"}"},er={i:0,char:null,str:"",quoted:!1,last:0},en=e=>{let t=e[0];for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},ea=e=>{let t=e[0].toUpperCase();for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},es=e=>e.replace(/_/g,"-"),ei=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),eo=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),el=e=>e.replace(/-/g,"_");function ec(e){return function t(r,n){return"object"==typeof r&&null!==r&&(114===n.type||3802===n.type)?Array.isArray(r)?r.map(e=>t(e,n)):Object.entries(r).reduce((r,[a,s])=>Object.assign(r,{[e(a)]:t(s,n)}),{}):r}}en.column={from:en},en.value={from:ec(en)},ei.column={to:ei};let eu={...en};eu.column.to=ei,ea.column={from:ea},ea.value={from:ec(ea)},eo.column={to:eo};let ef={...ea};ef.column.to=eo,es.column={from:es},es.value={from:ec(es)},el.column={to:el};let ep={...es};ep.column.to=el;var ed=e.i(4446),em=e.i(55004),eh=e.i(54799),eg=e.i(88947),ey=e.i(60438);class ew extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}let ev=function(e=[]){let t=e.slice(),r=0;return{get length(){return t.length-r},remove:e=>{let r=t.indexOf(e);return -1===r?null:(t.splice(r,1),e)},push:e=>(t.push(e),e),shift:()=>{let e=t[r++];return r===t.length?(r=0,t=[]):t[r-1]=void 0,e}}},eb=Buffer.allocUnsafe(256),eE=Object.assign(function(){return eE.i=0,eE},"BCcDdEFfHPpQSX".split("").reduce((e,t)=>{let r=t.charCodeAt(0);return e[t]=()=>(eb[0]=r,eE.i=5,eE),e},{}),{N:"\0",i:0,inc:e=>(eE.i+=e,eE),str(e){let t=Buffer.byteLength(e);return e_(t),eE.i+=eb.write(e,eE.i,t,"utf8"),eE},i16:e=>(e_(2),eb.writeUInt16BE(e,eE.i),eE.i+=2,eE),i32:(e,t)=>(t||0===t?eb.writeUInt32BE(e,t):(e_(4),eb.writeUInt32BE(e,eE.i),eE.i+=4),eE),z:e=>(e_(e),eb.fill(0,eE.i,eE.i+e),eE.i+=e,eE),raw:e=>(eb=Buffer.concat([eb.subarray(0,eE.i),e]),eE.i=eb.length,eE),end(e=1){eb.writeUInt32BE(eE.i-e,e);let t=eb.subarray(0,eE.i);return eE.i=0,eb=Buffer.allocUnsafe(256),t}});function e_(e){if(eb.length-eE.i<e){let t=eb,r=t.length;eb=Buffer.allocUnsafe(r+(r>>1)+e),t.copy(eb)}}let eA=function e(t,r={},{onopen:n=eT,onend:a=eT,onclose:s=eT}={}){let{ssl:i,max:o,user:l,host:c,port:u,database:f,parsers:p,transform:d,onnotice:m,onnotify:h,onparameter:g,max_pipeline:y,keep_alive:w,backoff:v,target_session_attrs:b}=t,E=ev(),_=eS++,A={pid:null,secret:null},S=ej(eQ,t.idle_timeout),R=ej(eQ,t.max_lifetime),I=ej(function(){eX(P("CONNECT_TIMEOUT",t,B)),B.destroy()},t.connect_timeout),B=null,U,k=new ew,D=Buffer.alloc(0),q=t.fetch_types,$={},L={},F=Math.random().toString(36).slice(2),z=1,H=0,G=0,K=0,X=0,V=0,Q=0,W=0,Y=null,Z=null,J=!1,ee=null,en=null,ea=null,es=null,ei=null,eo=null,el=null,ec=null,eu=null,ef=null,ep={queue:r.closed,idleTimer:S,connect(e){ea=e,eH()},terminate:eW,execute:eA,cancel:e_,end:eQ,count:0,id:_};return r.closed&&r.closed.push(ep),ep;async function eb(){let e;try{e=t.socket?await Promise.resolve(t.socket(t)):new ed.default.Socket}catch(e){eK(e);return}return e.on("error",eK),e.on("close",eY),e.on("drain",eL),e}async function e_({pid:e,secret:t},r,n){try{U=eE().i32(16).i32(0x4d2162e).i32(e).i32(t).end(16),await ez(),B.once("error",n),B.once("close",r)}catch(e){n(e)}}function eA(e){if(J)return eV(e,P("CONNECTION_DESTROYED",t));if(!e.cancelled)try{var r;let n,a,s;return e.state=A,eu?E.push(e):(eu=e).active=!0,r=e,n=[],a=[],s=M(r,r.strings[0],r.args[0],n,a,t),r.tagged||r.args.forEach(e=>j(e,n,a,t)),r.prepare=t.prepare&&(!("prepare"in r.options)||r.options.prepare),r.string=s,r.signature=r.prepare&&a+s,r.onlyDescribe&&delete L[r.signature],r.parameters=r.parameters||n,r.prepared=r.prepare&&r.signature in L,r.describeFirst=r.onlyDescribe||n.length&&!r.prepared,r.statement=r.prepared?L[r.signature]:{string:s,types:a,name:r.prepare?F+z++:""},"function"==typeof t.debug&&t.debug(_,s,n,a),eM(function(e){var t;if(e.parameters.length>=65534)throw T("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return e.options.simple?eE().Q().str(e.statement.string+eE.N).end():e.describeFirst?Buffer.concat([eI(e),ex]):e.prepare?e.prepared?eD(e):Buffer.concat([eI(e),eD(e)]):(t=e,Buffer.concat([e5(t.statement.string,t.parameters,t.statement.types),eN,eD(t)]))}(e))&&!e.describeFirst&&!e.cursorFn&&E.length<y&&(!e.options.onexecute||e.options.onexecute(ep))}catch(e){return 0===E.length&&eM(eO),eX(e),!0}}function eI(e){return Buffer.concat([e5(e.statement.string,e.parameters,e.statement.types,e.statement.name),function(e,t=""){return eE().D().str("S").str(t+eE.N).end()}("S",e.statement.name)])}function eD(e){return Buffer.concat([function(e,r,n="",a=""){let s,i;return eE().B().str(a+eE.N).str(n+eE.N).i16(0).i16(e.length),e.forEach((n,a)=>{if(null===n)return eE.i32(0xffffffff);i=r[a],e[a]=n=i in t.serializers?t.serializers[i](n):""+n,s=eE.i,eE.inc(4).str(n).i32(eE.i-s-4,s)}),eE.i16(0),eE.end()}(e.parameters,e.statement.types,e.statement.name,e.cursorName),e.cursorFn?e7("",e.cursorRows):eP])}function eM(e,t){return(eo=eo?Buffer.concat([eo,e]):Buffer.from(e),t||eo.length>=1024)?eq(t):(null===Z&&(Z=setImmediate(eq)),!0)}function eq(e){let t=B.write(eo,e);return null!==Z&&clearImmediate(Z),eo=Z=null,t}async function e$(){if(eM(eR),!await new Promise(e=>B.once("data",t=>e(83===t[0])))&&"prefer"===i)return eG();B.removeAllListeners(),(B=em.default.connect({socket:B,servername:ed.default.isIP(B.host)?void 0:B.host,..."require"===i||"allow"===i||"prefer"===i?{rejectUnauthorized:!1}:"verify-full"===i?{}:"object"==typeof i?i:{}})).on("secureConnect",eG),B.on("error",eK),B.on("close",eY),B.on("drain",eL)}function eL(){eu||n(ep)}function eF(r){if(!ee||(ee.push(r),!((G-=r.length)>0)))for(D=ee?Buffer.concat(ee,V-G):0===D.length?r:Buffer.concat([D,r],D.length+r.length);D.length>4;){if((V=D.readUInt32BE(1))>=D.length){G=V-D.length,ee=[D];break}try{!function(r,a=r[0]){(68===a?function(e){let t,r,n,a=7,s=eu.isRaw?Array(eu.statement.columns.length):{};for(let i=0;i<eu.statement.columns.length;i++)r=eu.statement.columns[i],t=e.readInt32BE(a),a+=4,n=-1===t?null:!0===eu.isRaw?e.subarray(a,a+=t):void 0===r.parser?e.toString("utf8",a,a+=t):!0===r.parser.array?r.parser(e.toString("utf8",a+1,a+=t)):r.parser(e.toString("utf8",a,a+=t)),eu.isRaw?s[i]=!0===eu.isRaw?n:d.value.from?d.value.from(n,r):n:s[r.name]=d.value.from?d.value.from(n,r):n;eu.forEachFn?eu.forEachFn(d.row.from?d.row.from(s):s,k):k[W++]=d.row.from?d.row.from(s):s}:100===a?function(e){ei&&(ei.push(e.subarray(5))||B.pause())}:65===a?function(e){if(!h)return;let t=9;for(;0!==e[t++];);h(e.toString("utf8",9,t-1),e.toString("utf8",t,e.length-1))}:83===a?function(e){let[r,n]=e.toString("utf8",5,e.length-1).split(eE.N);$[r]=n,t.parameters[r]!==n&&(t.parameters[r]=n,g&&g(r,n))}:90===a?function(r){if(eu&&eu.options.simple&&eu.resolve(en||k),eu=en=null,k=new ew,I.cancel(),ea){if(b)if(!$.in_hot_standby||!$.default_transaction_read_only)return function(){let e=new x([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],eA,null,{simple:!0});e.resolve=([[e],[t]])=>{$.default_transaction_read_only=e.transaction_read_only,$.in_hot_standby=t.pg_is_in_recovery?"on":"off"},e.execute()}();else{var a,s;if(a=b,s=$,"read-write"===a&&"on"===s.default_transaction_read_only||"read-only"===a&&"off"===s.default_transaction_read_only||"primary"===a&&"on"===s.in_hot_standby||"standby"===a&&"off"===s.in_hot_standby||"prefer-standby"===a&&"off"===s.in_hot_standby&&t.host[X])return eW()}return q?(ea.reserve&&(ea=null),e6()):(ea&&!ea.reserve&&eA(ea),t.shared.retries=X=0,void(ea=null))}for(;E.length&&(eu=E.shift())&&(eu.active=!0,eu.cancelled);)e(t).cancel(eu.state,eu.cancelled.resolve,eu.cancelled.reject);eu||(ep.reserved?ep.reserved.release||73!==r[5]?ep.reserved():es?eW():(ep.reserved=null,n(ep)):es?eW():n(ep))}:67===a?function(e){W=0;for(let t=e.length-1;t>0;t--)if(32===e[t]&&e[t+1]<58&&null===k.count&&(k.count=+e.toString("utf8",t+1,e.length-1)),e[t-1]>=65){k.command=e.toString("utf8",5,t),k.state=A;break}return(ef&&(ef(),ef=null),"BEGIN"!==k.command||1===o||ep.reserved)?eu.options.simple?eZ():void(eu.cursorFn&&(k.count&&eu.cursorFn(k),eM(eO)),eu.resolve(k)):eX(T("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}:50===a?eZ:49===a?function(){eu.parsing=!1}:116===a?function(e){let t=e.readUInt16BE(5);for(let r=0;r<t;++r)eu.statement.types[r]||(eu.statement.types[r]=e.readUInt32BE(7+4*r));eu.prepare&&(L[eu.signature]=eu.statement),eu.describeFirst&&!eu.onlyDescribe&&(eM(eD(eu)),eu.describeFirst=!1)}:84===a?function(e){let t;k.command&&((en=en||[k]).push(k=new ew),k.count=null,eu.statement.columns=null);let r=e.readUInt16BE(5),n=7;eu.statement.columns=Array(r);for(let a=0;a<r;++a){for(t=n;0!==e[n++];);let r=e.readUInt32BE(n),s=e.readUInt16BE(n+4),i=e.readUInt32BE(n+6);eu.statement.columns[a]={name:d.column.from?d.column.from(e.toString("utf8",t,n-1)):e.toString("utf8",t,n-1),parser:p[i],table:r,number:s,type:i},n+=18}if(k.statement=eu.statement,eu.onlyDescribe)return eu.resolve(eu.statement),eM(eO)}:82===a?eJ:110===a?function(){if(k.statement=eu.statement,k.statement.columns=[],eu.onlyDescribe)return eu.resolve(eu.statement),eM(eO)}:75===a?function(e){A.pid=e.readUInt32BE(5),A.secret=e.readUInt32BE(9)}:69===a?function(e){var t,r;eu&&(eu.cursorFn||eu.describeFirst)&&eM(eO);let n=N(eB(e));eu&&eu.retried?eX(eu.retried):eu&&eu.prepared&&eC.has(n.routine)?(t=eu,r=n,delete L[t.signature],t.retried=r,eA(t)):eX(n)}:115===a?e8:51===a?function(){k.count&&eu.cursorFn(k),eu.resolve(k)}:71===a?function(){ei=new eg.default.Writable({autoDestroy:!0,write(e,t,r){B.write(eE().d().raw(e).end(),r)},destroy(e,t){t(e),B.write(eE().f().str(e+eE.N).end()),ei=null},final(e){B.write(eE().c().end()),ef=e}}),eu.resolve(ei)}:78===a?function(e){m?m(eB(e)):console.log(eB(e))}:72===a?function(){ei=new eg.default.Readable({read(){B.resume()}}),eu.resolve(ei)}:99===a?function(){ei&&ei.push(null),ei=null}:73===a?function(){}:86===a?function(){eX(C("FunctionCallResponse"))}:118===a?function(){eX(C("NegotiateProtocolVersion"))}:87===a?function(){ei=new eg.default.Duplex({autoDestroy:!0,read(){B.resume()},write(e,t,r){B.write(eE().d().raw(e).end(),r)},destroy(e,t){t(e),B.write(eE().f().str(e+eE.N).end()),ei=null},final(e){B.write(eE().c().end()),ef=e}}),eu.resolve(ei)}:function(e){console.error("Postgres.js : Unknown Message:",e[0])})(r)}(D.subarray(0,V+1))}catch(e){eu&&(eu.cursorFn||eu.describeFirst)&&eM(eO),eX(e)}D=D.subarray(V+1),G=0,ee=null}}async function ez(){if(J=!1,$={},B||(B=await eb()),B){if(I.start(),t.socket)return i?e$():eG();if(B.on("connect",i?e$:eG),t.path)return B.connect(t.path);B.ssl=i,B.connect(u[K],c[K]),B.host=c[K],B.port=u[K],K=(K+1)%u.length}}function eH(){setTimeout(ez,H?H+Q-ey.performance.now():0)}function eG(){try{L={},q=t.fetch_types,F=Math.random().toString(36).slice(2),z=1,R.start(),B.on("data",eF),w&&B.setKeepAlive&&B.setKeepAlive(!0,1e3*w);let e=U||eE().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:l,database:f,client_encoding:"UTF8"},t.connection)).filter(([,e])=>e).map(([e,t])=>e+eE.N+t).join(eE.N)).z(2).end(0);eM(e)}catch(e){eK(e)}}function eK(e){if(ep.queue!==r.connecting||!t.host[X+1])for(eX(e);E.length;)eV(E.shift(),e)}function eX(e){ei&&(ei.destroy(e),ei=null),eu&&eV(eu,e),ea&&(eV(ea,e),ea=null)}function eV(e,r){if(e.reserve)return e.reject(r);r&&"object"==typeof r||(r=Error(r)),"query"in r||"parameters"in r||Object.defineProperties(r,{stack:{value:r.stack+e.origin.replace(/.*\n/,"\n"),enumerable:t.debug},query:{value:e.string,enumerable:t.debug},parameters:{value:e.parameters,enumerable:t.debug},args:{value:e.args,enumerable:t.debug},types:{value:e.statement&&e.statement.types,enumerable:t.debug}}),e.reject(r)}function eQ(){return es||(ep.reserved||a(ep),ep.reserved||ea||eu||0!==E.length?es=new Promise(e=>el=e):(eW(),new Promise(e=>B&&"closed"!==B.readyState?B.once("close",e):e())))}function eW(){J=!0,(ei||eu||ea||E.length)&&eK(P("CONNECTION_DESTROYED",t)),clearImmediate(Z),B&&(B.removeListener("data",eF),B.removeListener("connect",eG),"open"===B.readyState&&B.end(eE().X().end())),el&&(el(),es=el=null)}async function eY(e){if(D=Buffer.alloc(0),G=0,ee=null,clearImmediate(Z),B.removeListener("data",eF),B.removeListener("connect",eG),S.cancel(),R.cancel(),I.cancel(),B.removeAllListeners(),B=null,ea)return eH();!e&&(eu||E.length)&&eK(P("CONNECTION_CLOSED",t,B)),H=ey.performance.now(),e&&t.shared.retries++,Q=("function"==typeof v?v(t.shared.retries):v)*1e3,s(ep,P("CONNECTION_CLOSED",t,B))}function eZ(){k.statement||(k.statement=eu.statement),k.columns=eu.statement.columns}async function eJ(e,t=e.readUInt32BE(5)){(3===t?e0:5===t?e1:10===t?e2:11===t?e4:12===t?function(e){e.toString("utf8",9).split(eE.N,1)[0].slice(2)!==Y&&(eX(T("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),B.destroy())}:0!==t?function(e,t){console.error("Postgres.js : Unknown Auth:",t)}:eT)(e,t)}async function e0(){let e=await e3();eM(eE().p().str(e).z(1).end())}async function e1(e){let t="md5"+await eU(Buffer.concat([Buffer.from(await eU(await e3()+l)),e.subarray(9)]));eM(eE().p().str(t).z(1).end())}async function e2(){ec=(await eh.default.randomBytes(18)).toString("base64"),eE().p().str("SCRAM-SHA-256"+eE.N);let e=eE.i;eM(eE.inc(4).str("n,,n=*,r="+ec).i32(eE.i-e-4,e).end())}async function e4(e){var t;let r=e.toString("utf8",9).split(",").reduce((e,t)=>(e[t[0]]=t.slice(2),e),{}),n=await eh.default.pbkdf2Sync(await e3(),Buffer.from(r.s,"base64"),parseInt(r.i),32,"sha256"),a=await ek(n,"Client Key"),s="n=*,r="+ec+",r="+r.r+",s="+r.s+",i="+r.i+",c=biws,r="+r.r;Y=(await ek(await ek(n,"Server Key"),s)).toString("base64");let i="c=biws,r="+r.r+",p="+(function(e,t){let r=Math.max(e.length,t.length),n=Buffer.allocUnsafe(r);for(let a=0;a<r;a++)n[a]=e[a]^t[a];return n})(a,Buffer.from(await ek(await (t=a,eh.default.createHash("sha256").update(t).digest()),s))).toString("base64");eM(eE().p().str(i).end())}function e3(){return Promise.resolve("function"==typeof t.pass?t.pass():t.pass)}async function e6(){q=!1,(await new x([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],eA)).forEach(({oid:e,typarray:r})=>(function(e,r){if(t.parsers[r]&&t.serializers[r])return;let n=t.parsers[e];t.shared.typeArrayMap[e]=r,t.parsers[r]=e=>(er.i=er.last=0,function e(t,r,n,a){let s=[],i=1020===a?";":",";for(;t.i<r.length;t.i++){if(t.char=r[t.i],t.quoted)"\\"===t.char?t.str+=r[++t.i]:'"'===t.char?(s.push(n?n(t.str):t.str),t.str="",t.quoted='"'===r[t.i+1],t.last=t.i+2):t.str+=t.char;else if('"'===t.char)t.quoted=!0;else if("{"===t.char)t.last=++t.i,s.push(e(t,r,n,a));else if("}"===t.char){t.quoted=!1,t.last<t.i&&s.push(n?n(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1;break}else t.char===i&&"}"!==t.p&&'"'!==t.p&&(s.push(n?n(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1);t.p=t.char}return t.last<t.i&&s.push(n?n(r.slice(t.last,t.i+1)):r.slice(t.last,t.i+1)),s}(er,e,n,r)),t.parsers[r].array=!0,t.serializers[r]=n=>et(n,t.serializers[e],t,r)})(e,r))}async function e8(){try{let e=await Promise.resolve(eu.cursorFn(k));W=0,e===O?eM(function(e=""){return Buffer.concat([eE().C().str("P").str(e+eE.N).end(),eE().S().end()])}(eu.portal)):(k=new ew,eM(e7("",eu.cursorRows)))}catch(e){eM(eO),eu.reject(e)}}function e5(e,t,r,n=""){return eE().P().str(n+eE.N).str(e+eE.N).i16(t.length),t.forEach((e,t)=>eE.i32(r[t]||0)),eE.end()}function e7(e="",t=0){return Buffer.concat([eE().E().str(e+eE.N).i32(t).end(),ex])}},eS=1,eO=eE().S().end(),ex=eE().H().end(),eR=eE().i32(8).i32(0x4d2162f).end(8),eP=Buffer.concat([eE().E().str(eE.N).i32(0).end(),eO]),eN=eE().D().str("S").str(eE.N).end(),eT=()=>{},eC=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),eI={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function eB(e){let t={},r=5;for(let n=5;n<e.length-1;n++)0===e[n]&&(t[eI[e[r]]]=e.toString("utf8",r+1,n),r=n+1);return t}function eU(e){return eh.default.createHash("md5").update(e).digest("hex")}function ek(e,t){return eh.default.createHmac("sha256",e).update(t).digest()}function ej(e,t){let r;if(!(t="function"==typeof t?t():t))return{cancel:eT,start:eT};return{cancel(){r&&(clearTimeout(r),r=null)},start(){r&&clearTimeout(r),r=setTimeout(n,1e3*t,arguments)}};function n(t){e.apply(null,t),r=null}}let eD=()=>{};function eM(e,t,r,n){let a,s,i,o=n.raw?Array(t.length):{};for(let l=0;l<t.length;l++)a=e[r++],s=t[l],i=110===a?null:117===a?void 0:void 0===s.parser?e.toString("utf8",r+4,r+=4+e.readUInt32BE(r)):!0===s.parser.array?s.parser(e.toString("utf8",r+5,r+=4+e.readUInt32BE(r))):s.parser(e.toString("utf8",r+4,r+=4+e.readUInt32BE(r))),n.raw?o[l]=!0===n.raw?i:n.value.from?n.value.from(i,s):i:o[s.name]=n.value.from?n.value.from(i,s):i;return{i:r,row:n.row.from?n.row.from(o):o}}function eq(e,t,r=393216){return new Promise(async(n,a)=>{await e.begin(async e=>{let a;t||([{oid:t}]=await e`select lo_creat(-1) as oid`);let[{fd:s}]=await e`select lo_open(${t}, ${r}) as fd`,i={writable:l,readable:o,close:()=>e`select lo_close(${s})`.then(a),tell:()=>e`select lo_tell64(${s})`,read:t=>e`select loread(${s}, ${t}) as data`,write:t=>e`select lowrite(${s}, ${t})`,truncate:t=>e`select lo_truncate64(${s}, ${t})`,seek:(t,r=0)=>e`select lo_lseek64(${s}, ${t}, ${r})`,size:()=>e`
          select
            lo_lseek64(${s}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(i),new Promise(async e=>a=e);async function o({highWaterMark:e=16384,start:t=0,end:r=1/0}={}){let n=r-t;return t&&await i.seek(t),new eg.default.Readable({highWaterMark:e,async read(e){let t=e>n?e-n:e;n-=e;let[{data:r}]=await i.read(t);this.push(r),r.length<e&&this.push(null)}})}async function l({highWaterMark:e=16384,start:t=0}={}){return t&&await i.seek(t),new eg.default.Writable({highWaterMark:e,write(e,t,r){i.write(e).then(()=>r(),r)}})}}).catch(a)})}function e$(e){return(.5+Math.random()/2)*Math.min(3**e/100,20)}function eL(){return 60*(30+30*Math.random())}async function eF(e){return b.NextResponse.json({error:"Migration disabled in production"},{status:403})}Object.assign(function e(t,r){let n=function(e,t){var r;if(e&&e.shared)return e;let n=process.env,a=(e&&"string"!=typeof e?e:t)||{},{url:s,multihost:i}=function(e){if(!e||"string"!=typeof e)return{url:{searchParams:new Map}};let t=e;t=decodeURIComponent((t=t.slice(t.indexOf("://")+3).split(/[?/]/)[0]).slice(t.indexOf("@")+1));let r=new URL(e.replace(t,t.split(",")[0]));return{url:{username:decodeURIComponent(r.username),password:decodeURIComponent(r.password),host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,searchParams:r.searchParams},multihost:t.indexOf(",")>-1&&t}}(e),o=[...s.searchParams].reduce((e,[t,r])=>(e[t]=r,e),{}),l=a.hostname||a.host||i||s.hostname||n.PGHOST||"localhost",c=a.port||s.port||n.PGPORT||5432,u=a.user||a.username||s.username||n.PGUSERNAME||n.PGUSER||function(){try{return E.default.userInfo().username}catch(e){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();a.no_prepare&&(a.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),"timeout"in a&&(console.log("The timeout option is deprecated, use idle_timeout instead"),a.idle_timeout=a.timeout),"system"===o.sslrootcert&&(o.ssl="verify-full");let f=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],p={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:eL,max_pipeline:100,backoff:e$,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(l)?l:l.split(",").map(e=>e.split(":")[0]),port:Array.isArray(c)?c:l.split(",").map(e=>parseInt(e.split(":")[1]||c)),path:a.path||l.indexOf("/")>-1&&l+"/.s.PGSQL."+c,database:a.database||a.db||(s.pathname||"").slice(1)||n.PGDATABASE||u,user:u,pass:a.pass||a.password||s.password||n.PGPASSWORD||"",...Object.entries(p).reduce((e,[t,r])=>{let s=t in a?a[t]:t in o?"disable"!==o[t]&&"false"!==o[t]&&o[t]:n["PG"+t.toUpperCase()]||r;return e[t]="string"==typeof s&&f.includes(t)?+s:s,e},{}),connection:{application_name:n.PGAPPNAME||"postgres.js",...a.connection,...Object.entries(o).reduce((e,[t,r])=>(t in p||(e[t]=r),e),{})},types:a.types||{},target_session_attrs:function(e,t,r){let n=e.target_session_attrs||t.searchParams.get("target_session_attrs")||r.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw Error("target_session_attrs "+n+" is not supported")}(a,s,n),onnotice:a.onnotice,onnotify:a.onnotify,onclose:a.onclose,onparameter:a.onparameter,socket:a.socket,transform:{undefined:(r=a.transform||{undefined:void 0}).undefined,column:{from:"function"==typeof r.column?r.column:r.column&&r.column.from,to:r.column&&r.column.to},value:{from:"function"==typeof r.value?r.value:r.value&&r.value.from,to:r.value&&r.value.to},row:{from:"function"==typeof r.row?r.row:r.row&&r.row.from,to:r.row&&r.row.to}},parameters:{},shared:{retries:0,typeArrayMap:{}},...V(a.types)}}(t,r),a=n.no_subscribe||function(e,t){let r=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),a={},s,i,o=!1,l=f.sql=e({...t,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...t.connection,replication:"database"},onclose:async function(){o||(i=null,a.pid=a.secret=void 0,p(await d(l,n,t.publications)),r.forEach(e=>e.forEach(({onsubscribe:e})=>e())))},no_subscribe:!0}),c=l.end,u=l.close;return l.end=async()=>(o=!0,i&&await new Promise(e=>(i.once("close",e),i.end())),c()),l.close=async()=>(i&&await new Promise(e=>(i.once("close",e),i.end())),u()),f;async function f(e,o,c=eD,u=eD){e=function(e){let[,t,r,n]=e.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];return(t||"*")+(r?":"+(-1===r.indexOf(".")?"public."+r:r):"")+(n?"="+n:"")}(e),s||(s=d(l,n,t.publications));let m={fn:o,onsubscribe:c},h=r.has(e)?r.get(e).add(m):r.set(e,new Set([m])).get(e),g=()=>{h.delete(m),0===h.size&&r.delete(e)};return s.then(e=>(p(e),c(),i&&i.on("error",u),{unsubscribe:g,state:a,sql:l}))}function p(e){i=e.stream,a.pid=e.state.pid,a.secret=e.state.secret}async function d(e,r,n){if(!n)throw Error("Missing publication names");let a=await e.unsafe(`CREATE_REPLICATION_SLOT ${r} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[s]=a,i=await e.unsafe(`START_REPLICATION SLOT ${r} LOGICAL ${s.consistent_point} (proto_version '1', publication_names '${n}')`).writable(),o={lsn:Buffer.concat(s.consistent_point.split("/").map(e=>Buffer.from(("00000000"+e).slice(-8),"hex")))};return i.on("data",function(r){var n,a,s,c,u;let f;119===r[0]?(n=r.subarray(25),a=o,s=e.options.parsers,c=l,u=t.transform,Object.entries({R:e=>{let t=1,r=a[e.readUInt32BE(t)]={schema:e.toString("utf8",t+=4,t=e.indexOf(0,t))||"pg_catalog",table:e.toString("utf8",t+1,t=e.indexOf(0,t+1)),columns:Array(e.readUInt16BE(t+=2)),keys:[]};t+=2;let n=0,i;for(;t<e.length;)(i=r.columns[n++]={key:e[t++],name:u.column.from?u.column.from(e.toString("utf8",t,t=e.indexOf(0,t))):e.toString("utf8",t,t=e.indexOf(0,t)),type:e.readUInt32BE(t+=1),parser:s[e.readUInt32BE(t)],atttypmod:e.readUInt32BE(t+=4)}).key&&r.keys.push(i),t+=4},Y:()=>{},O:()=>{},B:e=>{var t;t=e.readBigInt64BE(9),a.date=new Date(Date.UTC(2e3,0,1)+Number(t/BigInt(1e3))),a.lsn=e.subarray(1,9)},I:e=>{let t=1,r=a[e.readUInt32BE(t)],{row:n}=eM(e,r.columns,t+=7,u);c(n,{command:"insert",relation:r})},D:e=>{let t=1,r=a[e.readUInt32BE(t)],n=75===e[t+=4];c(n||79===e[t]?eM(e,r.columns,t+=3,u).row:null,{command:"delete",relation:r,key:n})},U:e=>{let t=1,r=a[e.readUInt32BE(t)],n=75===e[t+=4],s=n||79===e[t]?eM(e,r.columns,t+=3,u):null;s&&(t=s.i);let{row:i}=eM(e,r.columns,t+3,u);c(i,{command:"update",relation:r,key:n,old:s&&s.row})},T:()=>{},C:()=>{}}).reduce((e,[t,r])=>(e[t.charCodeAt(0)]=r,e),{})[n[0]](n)):107===r[0]&&r[17]&&(o.lsn=r.subarray(1,9),(f=Buffer.alloc(34))[0]=114,f.fill(o.lsn,1),f.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),i.write(f))}),i.on("error",function(e){console.error("Unexpected error during logical streaming - reconnecting",e)}),i.on("close",e.close),{stream:i,state:a.state};function l(e,t){let r=t.relation.schema+"."+t.relation.table;m("*",e,t),m("*:"+r,e,t),t.relation.keys.length&&m("*:"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t),m(t.command,e,t),m(t.command+":"+r,e,t),t.relation.keys.length&&m(t.command+":"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t)}}function m(e,t,n){r.has(e)&&r.get(e).forEach(({fn:r})=>r(t,n,e))}}(e,{...n}),s=!1,i=ev(),o=ev(),l=ev(),c=ev(),u=ev(),f=ev(),p=ev(),d=ev(),m={connecting:o,reserved:l,closed:c,ended:u,open:f,busy:p,full:d},h=[...Array(n.max)].map(()=>eA(n,m,{onopen:L,onend:$,onclose:F})),g=y(function(e){return s?e.reject(P("CONNECTION_ENDED",n,n)):f.length?C(f.shift(),e):c.length?q(c.shift(),e):void(p.length?C(p.shift(),e):i.push(e))});return Object.assign(g,{get parameters(){return n.parameters},largeObject:eq.bind(null,g),subscribe:a,CLOSE:O,END:O,PostgresError:R,options:n,reserve:_,listen:w,begin:A,close:D,end:j}),g;function y(e){return e.debug=n.debug,Object.entries(n.types).reduce((e,[t,r])=>(e[t]=e=>new U(e,r.to),e),t),Object.assign(r,{types:t,typed:t,unsafe:function(t,r=[],n={}){return 2!=arguments.length||Array.isArray(r)||(n=r,r=[]),new x([t],r,e,I,{prepare:!1,...n,simple:"simple"in n?n.simple:0===r.length})},notify:b,array:function e(t,r){return Array.isArray(t)?new U(t,r||(t.length?Z(t)||25:0),n.shared.typeArrayMap):e(Array.from(arguments))},json:N,file:function(t,r=[],n={}){return 2!=arguments.length||Array.isArray(r)||(n=r,r=[]),new x([],r,r=>{v.default.readFile(t,"utf8",(t,n)=>{if(t)return r.reject(t);r.strings=[n],e(r)})},I,{...n,simple:"simple"in n?n.simple:0===r.length})}}),r;function t(e,t){return new U(e,t)}function r(t,...a){return t&&Array.isArray(t.raw)?new x(t,a,e,I):"string"!=typeof t||a.length?new k(t,a):new B(n.transform.column.to?n.transform.column.to(t):t)}}async function w(t,r,a){let s={fn:r,onlisten:a},i=w.sql||(w.sql=e({...n,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(w.channels).forEach(([e,{listeners:t}])=>{delete w.channels[e],Promise.all(t.map(t=>w(e,t.fn,t.onlisten).catch(()=>{})))})},onnotify(e,t){e in w.channels&&w.channels[e].listeners.forEach(e=>e.fn(t))}})),o=w.channels||(w.channels={});if(t in o){o[t].listeners.push(s);let e=await o[t].result;return s.onlisten&&s.onlisten(),{state:e.state,unlisten:c}}o[t]={result:i`listen ${i.unsafe('"'+t.replace(/"/g,'""')+'"')}`,listeners:[s]};let l=await o[t].result;return s.onlisten&&s.onlisten(),{state:l.state,unlisten:c};async function c(){if(t in o!=!1&&(o[t].listeners=o[t].listeners.filter(e=>e!==s),!o[t].listeners.length))return delete o[t],i`unlisten ${i.unsafe('"'+t.replace(/"/g,'""')+'"')}`}}async function b(e,t){return await g`select pg_notify(${e}, ${""+t})`}async function _(){let e=ev(),t=f.length?f.shift():await new Promise((e,t)=>{let r={reserve:e,reject:t};i.push(r),c.length&&q(c.shift(),r)});S(t,l),t.reserved=()=>e.length?t.execute(e.shift()):S(t,l),t.reserved.release=!0;let r=y(function(r){t.queue===d?e.push(r):t.execute(r)||S(t,d)});return r.release=()=>{t.reserved=null,L(t)},r}async function A(e,t){t||(t=e,e="");let r=ev(),n=0,a,s=null;try{return await g.unsafe("begin "+e.replace(/[^a-z ]/ig,""),[],{onexecute:function(e){a=e,S(e,l),e.reserved=()=>r.length?e.execute(r.shift()):S(e,l)}}).execute(),await Promise.race([i(a,t),new Promise((e,t)=>a.onclose=t)])}catch(e){throw e}async function i(e,t,a){let o,l,c=y(function(t){t.catch(e=>o||(o=e)),e.queue===d?r.push(t):e.execute(t)||S(e,d)});c.savepoint=function t(r,a){return r&&Array.isArray(r.raw)?t(e=>e.apply(e,arguments)):(1==arguments.length&&(a=r,r=null),i(e,a,"s"+n+++(r?"_"+r:"")))},c.prepare=e=>s=e.replace(/[^a-z0-9$-_. ]/gi),a&&await c`savepoint ${c(a)}`;try{if(l=await new Promise((e,r)=>{let n=t(c);Promise.resolve(Array.isArray(n)?Promise.all(n):n).then(e,r)}),o)throw o}catch(e){throw await (a?c`rollback to ${c(a)}`:c`rollback`),e instanceof R&&"25P02"===e.code&&o||e}return a||(s?await c`prepare transaction '${c.unsafe(s)}'`:await c`commit`),l}}function S(e,t){return e.queue.remove(e),t.push(e),e.queue=t,t===f?e.idleTimer.start():e.idleTimer.cancel(),e}function N(e){return new U(e,3802)}function C(e,t){return e.execute(t)?S(e,p):S(e,d)}function I(e){return new Promise((t,r)=>{e.state?e.active?eA(n).cancel(e.state,t,r):e.cancelled={resolve:t,reject:r}:(i.remove(e),e.cancelled=!0,e.reject(T("57014","canceling statement due to user request")),t())})}async function j({timeout:e=null}={}){let t;return s||(await 1,s=Promise.race([new Promise(r=>null!==e&&(t=setTimeout(M,1e3*e,r))),Promise.all(h.map(e=>e.end()).concat(w.sql?w.sql.end({timeout:0}):[],a.sql?a.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(t)))}async function D(){await Promise.all(h.map(e=>e.end()))}async function M(e){for(await Promise.all(h.map(e=>e.terminate()));i.length;)i.shift().reject(P("CONNECTION_DESTROYED",n));e()}function q(e,t){return S(e,o),e.connect(t),e}function $(e){S(e,u)}function L(e){if(0===i.length)return S(e,f);let t=Math.ceil(i.length/(o.length+1)),r=!0;for(;r&&i.length&&t-- >0;){let t=i.shift();if(t.reserve)return t.reserve(e);r=e.execute(t)}r?S(e,p):S(e,d)}function F(e,t){S(e,c),e.reserved=null,e.onclose&&(e.onclose(t),e.onclose=null),n.onclose&&n.onclose(e.id),i.length&&q(e,i.shift())}},{PostgresError:R,toPascal:ea,pascal:ef,toCamel:en,camel:eu,toKebab:es,kebab:ep,fromPascal:eo,fromCamel:ei,fromKebab:el,BigInt:{to:20,from:[20],parse:e=>BigInt(e),serialize:e=>e.toString()}}),process.env.SUPABASE_DB_URL||process.env.DATABASE_URL||process.env.SUPABASE_CONNECTION_STRING,e.s(["POST",()=>eF],44059);var ez=e.i(44059);let eH=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/migrate/route",pathname:"/api/migrate",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/migrate/route.ts",nextConfigOutput:"",userland:ez}),{workAsyncStorage:eG,workUnitAsyncStorage:eK,serverHooks:eX}=eH;function eV(){return(0,n.patchFetch)({workAsyncStorage:eG,workUnitAsyncStorage:eK})}async function eQ(e,t,n){eH.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/migrate/route";v=v.replace(/\/index$/,"")||"/";let b=await eH.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!b)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:E,params:_,nextConfig:A,parsedUrl:S,isDraftMode:O,prerenderManifest:x,routerServerContext:R,isOnDemandRevalidate:P,revalidateOnlyGenerated:N,resolvedPathname:T,clientReferenceManifest:C,serverActionsManifest:I}=b,B=(0,l.normalizeAppPath)(v),U=!!(x.dynamicRoutes[B]||x.routes[T]),k=async()=>((null==R?void 0:R.render404)?await R.render404(e,t,S,!1):t.end("This page could not be found"),null);if(U&&!O){let e=!!x.routes[T],t=x.dynamicRoutes[B];if(t&&!1===t.fallback&&!e){if(A.experimental.adapterPath)return await k();throw new y.NoFallbackError}}let j=null;!U||eH.isDev||O||(j="/index"===(j=T)?"/":j);let D=!0===eH.isDev||!U,M=U&&!D;I&&C&&(0,i.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:C,serverActionsManifest:I,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:I})});let q=e.method||"GET",$=(0,s.getTracer)(),L=$.getActiveScopeSpan(),F={params:_,prerenderManifest:x,renderOpts:{experimental:{authInterrupts:!!A.experimental.authInterrupts},cacheComponents:!!A.cacheComponents,supportsDynamicResponse:D,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:A.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>eH.onRequestError(e,t,n,R)},sharedContext:{buildId:E}},z=new c.NodeNextRequest(e),H=new c.NodeNextResponse(t),G=u.NextRequestAdapter.fromNodeNextRequest(z,(0,u.signalFromNodeResponse)(t));try{let i=async e=>eH.handle(G,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=$.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==f.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${q} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${q} ${v}`)}),o=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var s,l;let c=async({previousCacheEntry:r})=>{try{if(!o&&P&&N&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(a);e.fetchMetrics=F.renderOpts.fetchMetrics;let l=F.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let c=F.renderOpts.collectedTags;if(!U)return await (0,d.sendResponse)(z,H,s,F.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(s.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,n=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await eH.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:P})},R),t}},u=await eH.handleResponse({req:e,nextConfig:A,cacheKey:j,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:x,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:N,responseGenerator:c,waitUntil:n.waitUntil,isMinimalMode:o});if(!U)return null;if((null==u||null==(s=u.value)?void 0:s.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",P?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),O&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,m.fromNodeOutgoingHttpHeaders)(u.value.headers);return o&&U||f.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,d.sendResponse)(z,H,new Response(u.value.body,{headers:f,status:u.value.status||200})),null};L?await l(L):await $.withPropagatedContext(e.headers,()=>$.trace(f.BaseServerSpan.handleRequest,{spanName:`${q} ${v}`,kind:s.SpanKind.SERVER,attributes:{"http.method":q,"http.target":e.url}},l))}catch(t){if(t instanceof y.NoFallbackError||await eH.onRequestError(e,t,{routerKind:"App Router",routePath:B,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:P})}),U)throw t;return await (0,d.sendResponse)(z,H,new Response(null,{status:500})),null}}e.s(["handler",()=>eQ,"patchFetch",()=>eV,"routeModule",()=>eH,"serverHooks",()=>eX,"workAsyncStorage",()=>eG,"workUnitAsyncStorage",()=>eK],41099)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b70352f4._.js.map