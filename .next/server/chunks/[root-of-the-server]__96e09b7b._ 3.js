module.exports=[93695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,r,t)=>{r.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},66680,(e,r,t)=>{r.exports=e.x("node:crypto",()=>require("node:crypto"))},93266,e=>{"use strict";let r={randomUUID:e.i(66680).randomUUID};e.s(["default",0,r])},95638,e=>{"use strict";var r=e.i(66680);let t=new Uint8Array(256),n=t.length;function s(){return n>t.length-16&&((0,r.randomFillSync)(t),n=0),t.slice(n,n+=16)}e.s(["default",()=>s])},30901,84076,e=>{"use strict";let r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,t=function(e){return"string"==typeof e&&r.test(e)};e.s(["default",0,t],84076);let n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function s(e,r=0){return(n[e[r+0]]+n[e[r+1]]+n[e[r+2]]+n[e[r+3]]+"-"+n[e[r+4]]+n[e[r+5]]+"-"+n[e[r+6]]+n[e[r+7]]+"-"+n[e[r+8]]+n[e[r+9]]+"-"+n[e[r+10]]+n[e[r+11]]+n[e[r+12]]+n[e[r+13]]+n[e[r+14]]+n[e[r+15]]).toLowerCase()}e.s(["default",0,function(e,r=0){let n=s(e,r);if(!t(n))throw TypeError("Stringified UUID is invalid");return n},"unsafeStringify",()=>s],30901)},5499,e=>{"use strict";var r=e.i(93266),t=e.i(95638),n=e.i(30901);e.s(["default",0,function(e,s,a){if(r.default.randomUUID&&!s&&!e)return r.default.randomUUID();var o=e,i=a;let l=(o=o||{}).random??o.rng?.()??(0,t.default)();if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,s){if((i=i||0)<0||i+16>s.length)throw RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let e=0;e<16;++e)s[i+e]=l[e];return s}return(0,n.unsafeStringify)(l)}])},77583,e=>{"use strict";e.s([],13440),e.i(13440);var r=e.i(84076);let t=function(e){let t;if(!(0,r.default)(e))throw TypeError("Invalid UUID");return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/0x10000000000&255,t/0x100000000&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)};var n=e.i(30901),s=e.i(95638);let a={};function o(e,r,t,n,s,a,i=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(a){if(i<0||i+16>a.length)throw RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else a=new Uint8Array(16),i=0;r??=Date.now(),t??=0,n??=(e[8]<<8|e[9])&16383,s??=e.slice(10,16);let l=((0xfffffff&(r+=122192928e5))*1e4+t)%0x100000000;a[i++]=l>>>24&255,a[i++]=l>>>16&255,a[i++]=l>>>8&255,a[i++]=255&l;let u=r/0x100000000*1e4&0xfffffff;a[i++]=u>>>8&255,a[i++]=255&u,a[i++]=u>>>24&15|16,a[i++]=u>>>16&255,a[i++]=n>>>8|128,a[i++]=255&n;for(let e=0;e<6;++e)a[i++]=s[e];return a}let i=function(e,r,t){let i,l=e?._v6??!1;if(e){let r=Object.keys(e);1===r.length&&"_v6"===r[0]&&(e=void 0)}if(e)i=o(e.random??e.rng?.()??(0,s.default)(),e.msecs,e.nsecs,e.clockseq,e.node,r,t);else{var u,f,c;let e=Date.now(),n=(0,s.default)();u=a,f=e,c=n,u.msecs??=-1/0,u.nsecs??=0,f===u.msecs?(u.nsecs++,u.nsecs>=1e4&&(u.node=void 0,u.nsecs=0)):f>u.msecs?u.nsecs=0:f<u.msecs&&(u.node=void 0),u.node||(u.node=c.slice(10,16),u.node[0]|=1,u.clockseq=(c[8]<<8|c[9])&16383),u.msecs=f,i=o(n,a.msecs,a.nsecs,l?void 0:a.clockseq,l?void 0:a.node,r,t)}return r??(0,n.unsafeStringify)(i)};function l(e){var r;let s=(r="string"==typeof e?t(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));return"string"==typeof e?(0,n.unsafeStringify)(s):s}var u=e.i(66680);let f=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,u.createHash)("md5").update(e).digest()},c="6ba7b810-9dad-11d1-80b4-00c04fd430c8",d="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function p(e,r,s,a,o,i){let l="string"==typeof s?function(e){let r=new Uint8Array((e=unescape(encodeURIComponent(e))).length);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return r}(s):s,u="string"==typeof a?t(a):a;if("string"==typeof a&&(a=t(a)),a?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+l.length);if(f.set(u),f.set(l,u.length),(f=r(f))[6]=15&f[6]|e,f[8]=63&f[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=f[e];return o}return(0,n.unsafeStringify)(f)}function g(e,r,t,n){return p(48,f,e,r,t,n)}g.DNS=c,g.URL=d;var m=e.i(5499);let h=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,u.createHash)("sha1").update(e).digest()};function v(e,r,t,n){return p(80,h,e,r,t,n)}function y(e){var r;let s=(r="string"==typeof e?t(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));return"string"==typeof e?(0,n.unsafeStringify)(s):s}v.DNS=c,v.URL=d;let R={};function x(e,r,t,n,s=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(n){if(s<0||s+16>n.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`)}else n=new Uint8Array(16),s=0;return r??=Date.now(),t??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[s++]=r/0x10000000000&255,n[s++]=r/0x100000000&255,n[s++]=r/0x1000000&255,n[s++]=r/65536&255,n[s++]=r/256&255,n[s++]=255&r,n[s++]=112|t>>>28&15,n[s++]=t>>>20&255,n[s++]=128|t>>>14&63,n[s++]=t>>>6&255,n[s++]=t<<2&255|3&e[10],n[s++]=e[11],n[s++]=e[12],n[s++]=e[13],n[s++]=e[14],n[s++]=e[15],n}e.s(["MAX",0,"ffffffff-ffff-ffff-ffff-ffffffffffff","NIL",0,"00000000-0000-0000-0000-000000000000","parse",0,t,"stringify",()=>n.default,"v1",0,i,"v1ToV6",()=>l,"v3",0,g,"v4",()=>m.default,"v5",0,v,"v6",0,function(e,r,t){t??=0;let s=i({...e??={},_v6:!0},new Uint8Array(16));if(s=l(s),r){for(let e=0;e<16;e++)r[t+e]=s[e];return r}return(0,n.unsafeStringify)(s)},"v6ToV1",()=>y,"v7",0,function(e,r,t){let a;if(e)a=x(e.random??e.rng?.()??(0,s.default)(),e.msecs,e.seq,r,t);else{var o,i,l;let e=Date.now(),n=(0,s.default)();o=R,i=e,l=n,o.msecs??=-1/0,o.seq??=0,i>o.msecs?(o.seq=l[6]<<23|l[7]<<16|l[8]<<8|l[9],o.msecs=i):(o.seq=o.seq+1|0,0===o.seq&&o.msecs++),a=x(n,R.msecs,R.seq,r,t)}return r??(0,n.unsafeStringify)(a)},"validate",()=>r.default,"version",0,function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}],77583)},44687,e=>{"use strict";var r=e.i(72195);let t="https://waaigankcctijalvlppk.supabase.co",n=process.env.SUPABASE_SERVICE_ROLE_KEY,s=null;if(t&&n)s=(0,r.createClient)(t,n,{auth:{persistSession:!1}});else if("1"===process.env.APP_ALLOW_FAKE_SUPABASE){let r={projects:[{id:"p1",team_id:"t1",owner_id:"owner-1",name:"Test Project"}],share_links:[],project_members:[],team_members:[{team_id:"t1",user_id:"owner-1",role:"owner"}],audit_logs:[]},{v4:t}=e.r(77583);s={from:e=>{let n;return n={_table:e,_select:"*",_where:[],_limit:null,select:e=>(n._select=e||"*",n),eq:(e,r)=>(n._where.push({k:e,v:r}),n),limit:e=>(n._limit=e,n),maybeSingle:async()=>{let t=(r[e]||[]).filter(e=>n._where.every(r=>String(e[r.k])===String(r.v)));return{data:t.length>0?JSON.parse(JSON.stringify(t[0])):null,error:null}},insert:n=>{let s=r[e]||(r[e]=[]),a=(Array.isArray(n)?n:[n]).map(e=>{let r=Object.assign({},e);return r.id||(r.id=t()),r.created_at=new Date().toISOString(),s.push(r),r});return{data:a,error:null,select:()=>({single:async()=>({data:a[0],error:null})})}},update:t=>({eq:async(s,a)=>{let o=r[e]||[],i=0;for(let e of o)n._where.every(r=>String(e[r.k])===String(r.v))&&String(e[s])===String(a)&&(Object.assign(e,t),i++);return{data:i>0?o.filter(e=>n._where.every(r=>String(e[r.k])===String(r.v))&&String(e[s])===String(a)):[],error:null}}}),upsert:async(n,s)=>{let a=r[e]||(r[e]=[]),o=a.find(e=>e.project_id===n.project_id&&e.member_id===n.member_id);if(o)return Object.assign(o,n),{data:[o],error:null};let i=Object.assign({},n);return i.id||(i.id=t()),a.push(i),{data:[i],error:null}},single:async()=>({data:(r[e]||[]).filter(e=>n._where.every(r=>String(e[r.k])===String(r.v)))[0]||null,error:null})}}}}else throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY in environment. Set APP_ALLOW_FAKE_SUPABASE=1 to enable a local fake client for tests.");e.s(["supabaseAdmin",()=>s])},89960,e=>{"use strict";var r=e.i(5499);e.s(["v4",()=>r.default])},68527,e=>{"use strict";var r=e.i(47909),t=e.i(74017),n=e.i(96250),s=e.i(59756),a=e.i(61916),o=e.i(14444),i=e.i(37092),l=e.i(69741),u=e.i(16795),f=e.i(87718),c=e.i(95169),d=e.i(47587),p=e.i(66012),g=e.i(70101),m=e.i(26937),h=e.i(10372),v=e.i(93695);e.i(52474);var y=e.i(5232),R=e.i(89171),x=e.i(89960),E=e.i(44687);let _=process.env.NEXT_PUBLIC_SUPABASE_STORAGE_BUCKET||"media",w=parseInt(process.env.NEXT_PUBLIC_SUPABASE_SIGNED_TTL||"7200",10),b=e=>"string"==typeof e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e);async function S(e){let r;if(!e)return null;if((r=e)&&/^https?:\/\//i.test(r)){let r=function(e){try{let r=new URL(e).pathname.split("/").filter(Boolean),t=r.findIndex(e=>"object"===e);if(t>=0){let e=r.slice(t+1);if(e.length>=2&&e[1]===_)return e.slice(2).join("/");if(e.length>=3&&"sign"===e[0]&&e[2]===_)return e.slice(3).join("/")}}catch(r){console.warn("[GET /api/references] Failed to parse Supabase URL",{url:e,err:r})}return null}(e);if(!r)return e;e=r}let t=function(e){if(!e)return null;let r=e.replace(/^\/+/,"");return r.startsWith(`${_}/`)?r.slice(_.length+1):r}(e);if(!t)return null;try{let{data:e,error:r}=await E.supabaseAdmin.storage.from(_).createSignedUrl(t,w);if(r&&console.error("[GET /api/references] Signed URL error",{path:t,error:r}),e?.signedUrl)return e.signedUrl}catch(e){console.error("[GET /api/references] Exception signing URL",e)}return`https://waaigankcctijalvlppk.supabase.co/storage/v1/object/public/${_}/${t}`}async function A(e){try{let r=new URL(e.url).searchParams.get("projectId");if(!r)return R.NextResponse.json({error:"projectId required"},{status:400});let{data:t,error:n}=await E.supabaseAdmin.from("references_root").select("*").eq("project_id",r).order("created_at",{ascending:!1});if(n)return console.error("[GET /api/references] Error:",n),R.NextResponse.json({error:n.message},{status:500});let s=(t||[]).map(e=>e.id),a=[];if(s.length){let{data:e,error:r}=await E.supabaseAdmin.from("reference_versions").select("*").in("root_id",s).order("created_at",{ascending:!0});r?console.error("[GET /api/references] Version load error",r):a=e||[]}let o={};for(let e of a){let r=await S(e.url||e.thumbnail_path||null),t=await S(e.thumbnail_url||e.thumbnail_path||null),n={...e,url:r||e.url,thumbnail_url:t||e.thumbnail_url};o[n.root_id]||(o[n.root_id]=[]),o[n.root_id].push(n)}let i=(t||[]).map(e=>({...e,versions:o[e.id]||[]}));return R.NextResponse.json({references:i},{status:200})}catch(e){return console.error("[GET /api/references] Exception:",e),R.NextResponse.json({error:e.message},{status:500})}}async function U(e){try{let{project_id:r,root_id:t,name:n,type:s,url:a,size:o}=await e.json();if(!r||!n||!a)return R.NextResponse.json({error:"project_id, name, and url are required"},{status:400});if(!b(r))return R.NextResponse.json({error:"project_id must be a UUID"},{status:400});if(t){if(!b(t))return R.NextResponse.json({error:"root_id must be a UUID"},{status:400});let e=(0,x.v4)(),{data:r,error:i}=await E.supabaseAdmin.from("reference_versions").insert({id:e,root_id:t,name:n,type:s||null,url:a,size:o||null}).select().single();if(i)return console.error("[POST /api/references] Supabase error",i),R.NextResponse.json({error:i.message},{status:500});return R.NextResponse.json({version:r},{status:201})}let i=(0,x.v4)(),l=(0,x.v4)(),{data:u,error:f}=await E.supabaseAdmin.from("references_root").insert({id:i,project_id:r,name:n,active_version_index:0}).select().single();if(f)return console.error("[POST /api/references] Root insert error",f),R.NextResponse.json({error:f.message},{status:500});let{data:c,error:d}=await E.supabaseAdmin.from("reference_versions").insert({id:l,root_id:i,name:n,type:s||null,url:a,size:o||null}).select().single();if(d)return console.error("[POST /api/references] Version insert error",d),R.NextResponse.json({error:d.message},{status:500});return R.NextResponse.json({root:u,version:c},{status:201})}catch(e){return console.error("[POST /api/references] Error",e),R.NextResponse.json({error:e.message||"Internal error"},{status:500})}}async function j(e){try{let{rootId:r,versionId:t}=await e.json();if(!r)return R.NextResponse.json({error:"rootId is required"},{status:400});if(!b(r))return R.NextResponse.json({error:"rootId must be a UUID"},{status:400});if(t){if(!b(t))return R.NextResponse.json({error:"versionId must be a UUID"},{status:400});let{error:e}=await E.supabaseAdmin.from("reference_versions").delete().eq("id",t).eq("root_id",r);if(e)return console.error("[DELETE /api/references] Version delete error",e),R.NextResponse.json({error:e.message},{status:500});return R.NextResponse.json({success:!0,message:"Version deleted"},{status:200})}let{error:n}=await E.supabaseAdmin.from("references_root").delete().eq("id",r);if(n)return console.error("[DELETE /api/references] Root delete error",n),R.NextResponse.json({error:n.message},{status:500});return R.NextResponse.json({success:!0,message:"Reference group deleted"},{status:200})}catch(e){return console.error("[DELETE /api/references] Error",e),R.NextResponse.json({error:e.message||"Internal error"},{status:500})}}e.s(["DELETE",()=>j,"GET",()=>A,"POST",()=>U],94368);var I=e.i(94368);let N=new r.AppRouteRouteModule({definition:{kind:t.RouteKind.APP_ROUTE,page:"/api/references/route",pathname:"/api/references",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/references/route.ts",nextConfigOutput:"",userland:I}),{workAsyncStorage:T,workUnitAsyncStorage:C,serverHooks:P}=N;function q(){return(0,n.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:C})}async function D(e,r,n){N.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let R="/api/references/route";R=R.replace(/\/index$/,"")||"/";let x=await N.prepare(e,r,{srcPage:R,multiZoneDraftMode:!1});if(!x)return r.statusCode=400,r.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:E,params:_,nextConfig:w,parsedUrl:b,isDraftMode:S,prerenderManifest:A,routerServerContext:U,isOnDemandRevalidate:j,revalidateOnlyGenerated:I,resolvedPathname:T,clientReferenceManifest:C,serverActionsManifest:P}=x,q=(0,l.normalizeAppPath)(R),D=!!(A.dynamicRoutes[q]||A.routes[T]),O=async()=>((null==U?void 0:U.render404)?await U.render404(e,r,b,!1):r.end("This page could not be found"),null);if(D&&!S){let e=!!A.routes[T],r=A.dynamicRoutes[q];if(r&&!1===r.fallback&&!e){if(w.experimental.adapterPath)return await O();throw new v.NoFallbackError}}let k=null;!D||N.isDev||S||(k="/index"===(k=T)?"/":k);let L=!0===N.isDev||!D,B=D&&!L;P&&C&&(0,o.setReferenceManifestsSingleton)({page:R,clientReferenceManifest:C,serverActionsManifest:P,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:P})});let $=e.method||"GET",H=(0,a.getTracer)(),M=H.getActiveScopeSpan(),K={params:_,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:n.waitUntil,onClose:e=>{r.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(r,t,n)=>N.onRequestError(e,r,n,U)},sharedContext:{buildId:E}},F=new u.NodeNextRequest(e),G=new u.NodeNextResponse(r),V=f.NextRequestAdapter.fromNodeNextRequest(F,(0,f.signalFromNodeResponse)(r));try{let o=async e=>N.handle(V,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let t=H.getRootSpanAttributes();if(!t)return;if(t.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${t.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=t.get("next.route");if(n){let r=`${$} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":r}),e.updateName(r)}else e.updateName(`${$} ${R}`)}),i=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var a,l;let u=async({previousCacheEntry:t})=>{try{if(!i&&j&&I&&!t)return r.statusCode=404,r.setHeader("x-nextjs-cache","REVALIDATED"),r.end("This page could not be found"),null;let a=await o(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let u=K.renderOpts.collectedTags;if(!D)return await (0,p.sendResponse)(F,G,a,K.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),r=(0,g.toNodeOutgoingHttpHeaders)(a.headers);u&&(r[h.NEXT_CACHE_TAGS_HEADER]=u),!r["content-type"]&&e.type&&(r["content-type"]=e.type);let t=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,n=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:r},cacheControl:{revalidate:t,expire:n}}}}catch(r){throw(null==t?void 0:t.isStale)&&await N.onRequestError(e,r,{routerKind:"App Router",routePath:R,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:B,isOnDemandRevalidate:j})},U),r}},f=await N.handleResponse({req:e,nextConfig:w,cacheKey:k,routeKind:t.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:I,responseGenerator:u,waitUntil:n.waitUntil,isMinimalMode:i});if(!D)return null;if((null==f||null==(a=f.value)?void 0:a.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==f||null==(l=f.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||r.setHeader("x-nextjs-cache",j?"REVALIDATED":f.isMiss?"MISS":f.isStale?"STALE":"HIT"),S&&r.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let c=(0,g.fromNodeOutgoingHttpHeaders)(f.value.headers);return i&&D||c.delete(h.NEXT_CACHE_TAGS_HEADER),!f.cacheControl||r.getHeader("Cache-Control")||c.get("Cache-Control")||c.set("Cache-Control",(0,m.getCacheControlHeader)(f.cacheControl)),await (0,p.sendResponse)(F,G,new Response(f.value.body,{headers:c,status:f.value.status||200})),null};M?await l(M):await H.withPropagatedContext(e.headers,()=>H.trace(c.BaseServerSpan.handleRequest,{spanName:`${$} ${R}`,kind:a.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},l))}catch(r){if(r instanceof v.NoFallbackError||await N.onRequestError(e,r,{routerKind:"App Router",routePath:q,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:B,isOnDemandRevalidate:j})}),D)throw r;return await (0,p.sendResponse)(F,G,new Response(null,{status:500})),null}}e.s(["handler",()=>D,"patchFetch",()=>q,"routeModule",()=>N,"serverHooks",()=>P,"workAsyncStorage",()=>T,"workUnitAsyncStorage",()=>C],68527)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__96e09b7b._.js.map