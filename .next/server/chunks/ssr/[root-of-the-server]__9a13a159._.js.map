{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs","../../../../app/register/complete/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function CompleteProfile() {\n  const [supabase, setSupabase] = useState<any>(null);\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [role, setRole] = useState(\"Other\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const router = useRouter();\n\n  useEffect(() => {\n    import(\"@/lib/supabaseClient\").then(mod => {\n      const client = mod.getSupabaseClient();\n      setSupabase(client);\n    });\n  }, []);\n\n  const roles = [\n    \"Producer\",\n    \"Editor\",\n    \"Sound Designer\",\n    \"Director\",\n    \"Other\",\n  ];\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!supabase) return;\n    setLoading(true);\n    setMessage(\"\");\n\n    try {\n      // Ensure user is signed in\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        setMessage(\"You must be signed in to complete your profile.\");\n        setLoading(false);\n        router.push('/login');\n        return;\n      }\n\n      // Update user metadata (public metadata) with profile fields\n      const { error } = await supabase.auth.updateUser({\n        data: {\n          first_name: firstName,\n          last_name: lastName,\n          role: role,\n        },\n      });\n\n      if (error) throw error;\n\n      setMessage(\"Profile saved. Redirecting…\");\n      setTimeout(() => router.push('/'), 900);\n    } catch (err: any) {\n      console.error('[CompleteProfile] Error saving profile', err);\n      setMessage(err?.message || 'Error saving profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ padding: 20, maxWidth: 600, margin: '40px auto' }}>\n      <h2>Complete your profile</h2>\n      <p>Please enter your name and choose your professional role.</p>\n\n      <form onSubmit={handleSubmit}>\n        <div style={{ marginBottom: 12 }}>\n          <label>First name</label>\n          <input value={firstName} onChange={e => setFirstName(e.target.value)} required style={{ width: '100%', padding: 8 }} />\n        </div>\n\n        <div style={{ marginBottom: 12 }}>\n          <label>Last name</label>\n          <input value={lastName} onChange={e => setLastName(e.target.value)} required style={{ width: '100%', padding: 8 }} />\n        </div>\n\n        <div style={{ marginBottom: 12 }}>\n          <label>Role</label>\n          <select value={role} onChange={e => setRole(e.target.value)} style={{ width: '100%', padding: 8 }}>\n            {roles.map(r => <option key={r} value={r}>{r}</option>)}\n          </select>\n        </div>\n\n        <button type=\"submit\" disabled={loading} style={{ padding: '10px 16px' }}>{loading ? 'Saving…' : 'Save profile'}</button>\n      </form>\n\n      {message && <div style={{ marginTop: 12 }}>{message}</div>}\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}