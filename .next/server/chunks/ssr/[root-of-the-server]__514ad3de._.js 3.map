{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/components/SupabaseSyncBridge.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\n\nimport { useEffect } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\nexport default function SupabaseSyncBridge() {\n  useEffect(() => {\n    // Expose Supabase client and sync functions to global scope\n    window.supabase = supabase;\n\n    window.SupabaseSync = {\n      async saveProject(project: any) {\n        try {\n          const { error } = await supabase.from(\"projects\").upsert(\n            { id: project.id, name: project.name, description: project.description || null },\n            { onConflict: \"id\" }\n          );\n          if (error) throw error;\n          console.log(\"✅ Project saved:\", project.id);\n          return true;\n        } catch (err) {\n          console.error(\"❌ Error saving project:\", err);\n          return false;\n        }\n      },\n\n      async loadProjects() {\n        try {\n          const { data, error } = await supabase\n            .from(\"projects\")\n            .select(`id, name, description, created_at, updated_at, cues(id, project_id, index_in_project, original_name, name, display_name, status, versions(id, cue_id, index_in_cue, status, media_type, media_storage_path, media_url, media_original_name, media_display_name, media_duration, media_thumbnail_path, media_thumbnail_url, media_waveform_data))`)\n            .order(\"created_at\", { ascending: true });\n          if (error) throw error;\n          console.log(\"✅ Projects loaded:\", data?.length || 0);\n          return data || [];\n        } catch (err) {\n          console.error(\"❌ Error loading projects:\", err);\n          return [];\n        }\n      },\n\n      async saveCue(projectId: string, cue: any) {\n        try {\n          const { error } = await supabase.from(\"cues\").upsert(\n            {\n              id: cue.id,\n              project_id: projectId,\n              index_in_project: cue.index || cue.indexInProject || 0,\n              original_name: cue.originalName || null,\n              name: cue.name || null,\n              display_name: cue.displayName || null,\n              status: cue.status || \"in-review\",\n            },\n            { onConflict: \"id\" }\n          );\n          if (error) throw error;\n          console.log(\"✅ Cue saved:\", cue.id);\n          return true;\n        } catch (err) {\n          console.error(\"❌ Error saving cue:\", err);\n          return false;\n        }\n      },\n\n      async saveVersion(cueId: string, version: any) {\n        try {\n          const { error } = await supabase.from(\"versions\").upsert(\n            {\n              id: version.id,\n              cue_id: cueId,\n              index_in_cue: version.index || version.indexInCue || 0,\n              status: version.status || \"in-review\",\n              media_type: version.media?.type || null,\n              media_storage_path: version.media?.storagePath || null,\n              media_url: version.media?.url || null,\n              media_original_name: version.media?.originalName || null,\n              media_display_name: version.media?.displayName || null,\n              media_duration: version.media?.duration || null,\n              media_thumbnail_path: version.media?.thumbnailPath || null,\n              media_thumbnail_url: version.media?.thumbnailUrl || null,\n            },\n            { onConflict: \"id\" }\n          );\n          if (error) throw error;\n          console.log(\"✅ Version saved:\", version.id);\n          return true;\n        } catch (err) {\n          console.error(\"❌ Error saving version:\", err);\n          return false;\n        }\n      },\n\n      async saveVersionFile(versionId: string, file: any) {\n        try {\n          const { error } = await supabase.from(\"version_files\").upsert(\n            {\n              id: file.id,\n              version_id: versionId,\n              name: file.name,\n              type: file.type || null,\n              url: file.url || null,\n              size: file.size || null,\n            },\n            { onConflict: \"id\" }\n          );\n          if (error) throw error;\n          console.log(\"✅ Version file saved:\", file.id);\n          return true;\n        } catch (err) {\n          console.error(\"❌ Error saving version file:\", err);\n          return false;\n        }\n      },\n    };\n\n    console.log(\"✅ SupabaseSync bridge initialized\");\n\n    // Trigger initialization of flow.js if already loaded\n    if (window.dispatchEvent) {\n      window.dispatchEvent(new Event(\"supabase-sync-ready\"));\n    }\n  }, []);\n\n  return null;\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","React"],"mappings":"0NA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,KAAK,yBCA9B,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAEe,SAAS,IAsHtB,MArHA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,OAAO,QAAQ,CAAG,EAAA,QAAQ,CAE1B,OAAO,YAAY,CAAG,CACpB,MAAM,YAAY,CAAY,EAC5B,GAAI,CACF,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CACtD,CAAE,GAAI,EAAQ,EAAE,CAAE,KAAM,EAAQ,IAAI,CAAE,YAAa,EAAQ,WAAW,EAAI,IAAK,EAC/E,CAAE,WAAY,IAAK,GAErB,GAAI,EAAO,MAAM,EAEjB,OADA,QAAQ,GAAG,CAAC,mBAAoB,EAAQ,EAAE,GACnC,CACT,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,0BAA2B,IAClC,CACT,CACF,EAEA,MAAM,eACJ,GAAI,CACF,GAAM,MAAE,CAAI,CAAE,OAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC,gVAAgV,CAAC,EACzV,KAAK,CAAC,aAAc,CAAE,WAAW,CAAK,GACzC,GAAI,EAAO,MAAM,EAEjB,OADA,QAAQ,GAAG,CAAC,qBAAsB,GAAM,QAAU,GAC3C,GAAQ,EAAE,AACnB,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,4BAA6B,GACpC,EAAE,AACX,CACF,EAEA,MAAM,QAAQ,CAAiB,CAAE,CAAQ,EACvC,GAAI,CACF,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,QAAQ,MAAM,CAClD,CACE,GAAI,EAAI,EAAE,CACV,WAAY,EACZ,iBAAkB,EAAI,KAAK,EAAI,EAAI,cAAc,EAAI,EACrD,cAAe,EAAI,YAAY,EAAI,KACnC,KAAM,EAAI,IAAI,EAAI,KAClB,aAAc,EAAI,WAAW,EAAI,KACjC,OAAQ,EAAI,MAAM,EAAI,WACxB,EACA,CAAE,WAAY,IAAK,GAErB,GAAI,EAAO,MAAM,EAEjB,OADA,QAAQ,GAAG,CAAC,eAAgB,EAAI,EAAE,GAC3B,CACT,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,sBAAuB,GAC9B,EACT,CACF,EAEA,MAAM,YAAY,CAAa,CAAE,CAAY,EAC3C,GAAI,CACF,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CACtD,CACE,GAAI,EAAQ,EAAE,CACd,OAAQ,EACR,aAAc,EAAQ,KAAK,EAAI,EAAQ,UAAU,EAAI,EACrD,OAAQ,EAAQ,MAAM,EAAI,YAC1B,WAAY,EAAQ,KAAK,EAAE,MAAQ,KACnC,mBAAoB,EAAQ,KAAK,EAAE,aAAe,KAClD,UAAW,EAAQ,KAAK,EAAE,KAAO,KACjC,oBAAqB,EAAQ,KAAK,EAAE,cAAgB,KACpD,mBAAoB,EAAQ,KAAK,EAAE,aAAe,KAClD,eAAgB,EAAQ,KAAK,EAAE,UAAY,KAC3C,qBAAsB,EAAQ,KAAK,EAAE,eAAiB,KACtD,oBAAqB,EAAQ,KAAK,EAAE,cAAgB,IACtD,EACA,CAAE,WAAY,IAAK,GAErB,GAAI,EAAO,MAAM,EAEjB,OADA,QAAQ,GAAG,CAAC,mBAAoB,EAAQ,EAAE,GACnC,CACT,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,0BAA2B,IAClC,CACT,CACF,EAEA,MAAM,gBAAgB,CAAiB,CAAE,CAAS,EAChD,GAAI,CACF,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAC3D,CACE,GAAI,EAAK,EAAE,CACX,WAAY,EACZ,KAAM,EAAK,IAAI,CACf,KAAM,EAAK,IAAI,EAAI,KACnB,IAAK,EAAK,GAAG,EAAI,KACjB,KAAM,EAAK,IAAI,EAAI,IACrB,EACA,CAAE,WAAY,IAAK,GAErB,GAAI,EAAO,MAAM,EAEjB,OADA,QAAQ,GAAG,CAAC,wBAAyB,EAAK,EAAE,GACrC,CACT,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,+BAAgC,IACvC,CACT,CACF,CACF,EAEA,QAAQ,GAAG,CAAC,qCAGR,OAAO,aAAa,EAAE,AACxB,OAAO,aAAa,CAAC,IAAI,MAAM,uBAEnC,EAAG,EAAE,EAEE,IACT","ignoreList":[0,1]}