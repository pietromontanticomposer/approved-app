module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},45412,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let e=(0,d.useRouter)(),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("dark"),[A,B]=(0,c.useState)("it"),[C,D]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{let{getSupabaseClient:b}=await a.A(61780),c=b();h(c);let{data:d}=await c.auth.getUser();l(d?.user||null);let e=d?.user?.user_metadata||{};v(e.first_name||e.firstName||""),x(e.last_name||e.lastName||""),n((d?.user?.identities||[]).map(a=>({provider:a.provider,identityId:a.identity_id,email:a.identity_data?.email||d?.user?.email||null}))),j(!1)})()},[]);let E=async(a=!1)=>{if(!g)return;r(null),p(null);let{error:b}=await g.auth.signOut({scope:a?"global":"local"});b?r(b.message):(p(a?"Logout da tutti i dispositivi eseguito":"Logout eseguito"),e.push("/login"))},F=async()=>{if(!g)return;if(s.length<6)return void r("La password deve avere almeno 6 caratteri");r(null),p(null);let{error:a}=await g.auth.updateUser({password:s});a?r(a.message):p("Password aggiornata")},G=async()=>{if(g){r(null),p(null);try{let a=`${u||""} ${w||""}`.trim(),{error:b}=await g.auth.updateUser({data:{first_name:u||null,last_name:w||null,full_name:a||null}});if(b)return void r(b.message||"Errore aggiornamento profilo");let{data:c}=await g.auth.getUser();l(c?.user||null),p("Profilo aggiornato")}catch(a){r(a?.message||"Errore")}}},H=m.some(a=>"email"===a.provider);return i?(0,b.jsx)("div",{style:f.page,children:"Caricamento account..."}):k?(0,b.jsxs)("div",{style:f.page,children:[(0,b.jsxs)("div",{style:f.headerRow,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{style:f.title,children:"Il mio account"}),(0,b.jsx)("p",{style:f.muted,children:"Gestisci dati personali, sicurezza e preferenze"})]}),(0,b.jsx)("button",{style:f.ghostButton,onClick:()=>e.push("/"),children:"â† Torna all'app"})]}),(0,b.jsxs)("div",{style:f.grid,children:[(0,b.jsxs)("div",{style:f.card,children:[(0,b.jsx)("h2",{style:f.cardTitle,children:"ðŸ‘¤ Dati personali"}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Nome"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,b.jsx)("input",{value:u,onChange:a=>v(a.target.value),placeholder:"Nome",style:{...f.input,width:"140px"}}),(0,b.jsx)("input",{value:w,onChange:a=>x(a.target.value),placeholder:"Cognome",style:{...f.input,width:"180px"}}),(0,b.jsx)("button",{style:f.primaryButton,onClick:G,children:"Salva"})]})]}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Nome completo"}),(0,b.jsx)("div",{style:f.value,children:k.user_metadata?.full_name||`${u} ${w}`.trim()||"â€”"})]}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Email"}),(0,b.jsx)("div",{style:f.value,children:k.email||"â€”"})]}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Foto profilo"}),(0,b.jsx)("div",{style:f.value,children:"Usa il provider collegato (Google/Apple)"})]})]}),(0,b.jsxs)("div",{style:f.card,children:[(0,b.jsx)("h2",{style:f.cardTitle,children:"ðŸ” Sicurezza"}),(0,b.jsxs)("div",{style:f.subsection,children:[(0,b.jsx)("div",{style:f.subLabel,children:"Provider collegati"}),(0,b.jsxs)("ul",{style:{paddingLeft:"1rem",margin:0},children:[0===m.length&&(0,b.jsx)("li",{style:f.muted,children:"Nessun provider trovato"}),m.map(a=>{var c;return(0,b.jsxs)("li",{style:f.value,children:["google"===(c=a.provider)?"Google":"apple"===c?"Apple":"email"===c?"Email/Password":c," ",a.email?`(${a.email})`:""]},a.identityId||a.provider)})]})]}),H?(0,b.jsxs)("div",{style:f.subsection,children:[(0,b.jsx)("div",{style:f.subLabel,children:"Cambia password"}),(0,b.jsx)("input",{type:"password",placeholder:"Nuova password",value:s,onChange:a=>t(a.target.value),style:f.input}),(0,b.jsx)("button",{style:f.primaryButton,onClick:F,children:"Aggiorna password"})]}):(0,b.jsxs)("div",{style:f.subsection,children:[(0,b.jsx)("div",{style:f.subLabel,children:"Cambia password"}),(0,b.jsx)("div",{style:f.muted,children:"Non disponibile per i provider social (Google/Apple)"})]}),(0,b.jsxs)("div",{style:f.buttonsRow,children:[(0,b.jsx)("button",{style:f.secondaryButton,onClick:()=>E(!1),children:"Logout"}),(0,b.jsx)("button",{style:f.ghostButton,onClick:()=>E(!0),children:"Logout da tutti i dispositivi"})]}),(0,b.jsxs)("div",{style:f.subsection,children:[(0,b.jsx)("div",{style:f.subLabel,children:"Cancella account"}),(0,b.jsx)("div",{style:f.muted,children:"Contatta il supporto per la cancellazione definitiva."})]})]}),(0,b.jsxs)("div",{style:f.card,children:[(0,b.jsx)("h2",{style:f.cardTitle,children:"âš™ï¸ Preferenze"}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Tema"}),(0,b.jsxs)("select",{style:f.select,value:y,onChange:a=>z(a.target.value),children:[(0,b.jsx)("option",{value:"dark",children:"Scuro"}),(0,b.jsx)("option",{value:"light",children:"Chiaro"})]})]}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Lingua"}),(0,b.jsxs)("select",{style:f.select,value:A,onChange:a=>B(a.target.value),children:[(0,b.jsx)("option",{value:"it",children:"Italiano"}),(0,b.jsx)("option",{value:"en",children:"English"})]})]}),(0,b.jsxs)("div",{style:f.fieldRow,children:[(0,b.jsx)("div",{style:f.label,children:"Notifiche"}),(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:C,onChange:a=>D(a.target.checked)}),(0,b.jsx)("span",{style:f.value,children:"Attive"})]})]})]})]}),(o||q)&&(0,b.jsx)("div",{style:{...f.card,borderColor:q?"#4d1a1a":"#1a4d1a"},children:(0,b.jsx)("div",{style:{color:q?"#ff6b6b":"#44ff44"},children:q||o})})]}):(0,b.jsx)("div",{style:f.page,children:(0,b.jsxs)("div",{style:f.card,children:[(0,b.jsx)("h1",{style:f.title,children:"Account"}),(0,b.jsx)("p",{style:f.muted,children:"Non sei autenticato."}),(0,b.jsx)("button",{style:f.primaryButton,onClick:()=>e.push("/login"),children:"Vai al login"})]})})}let f={page:{minHeight:"100vh",background:"#0a0a0a",color:"#fff",padding:"2rem",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},headerRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.8rem"},muted:{color:"#888",margin:0},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"1rem"},card:{background:"#1a1a1a",border:"1px solid #333",borderRadius:"10px",padding:"1.25rem"},cardTitle:{marginTop:0,marginBottom:"1rem"},fieldRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #222"},label:{color:"#aaa",fontSize:"0.9rem"},value:{color:"#fff",fontSize:"0.95rem"},subLabel:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.35rem"},subsection:{marginTop:"0.75rem",borderTop:"1px solid #222",paddingTop:"0.75rem"},buttonsRow:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},primaryButton:{background:"#0066ff",color:"#fff",border:"none",padding:"0.6rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},secondaryButton:{background:"#333",color:"#fff",border:"1px solid #444",padding:"0.6rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},ghostButton:{background:"transparent",color:"#999",border:"1px solid #333",padding:"0.6rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},input:{width:"100%",padding:"0.65rem",borderRadius:"6px",border:"1px solid #333",background:"#0a0a0a",color:"#fff",marginBottom:"0.5rem"},select:{background:"#0a0a0a",color:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"0.45rem",minWidth:"140px"}};a.s(["default",()=>e])},61780,a=>{a.v(a=>Promise.resolve().then(()=>a(7291)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7ab439bb._.js.map