(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,l)=>{t.exports=e.r(76562)},88111,e=>{"use strict";var t=e.i(43476),l=e.i(71645),i=e.i(18566);function s(){let s=(0,i.useRouter)(),[a,n]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[c,u]=(0,l.useState)(null),[p,h]=(0,l.useState)([]),[m,g]=(0,l.useState)(null),[x,y]=(0,l.useState)(null),[v,f]=(0,l.useState)(""),[j,b]=(0,l.useState)(""),[w,C]=(0,l.useState)(""),[R,S]=(0,l.useState)("dark"),[k,B]=(0,l.useState)("it"),[T,L]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{let{getSupabaseClient:t}=await e.A(21933),l=t();n(l);let{data:i}=await l.auth.getUser();u(i?.user||null);let s=i?.user?.user_metadata||{};b(s.first_name||s.firstName||""),C(s.last_name||s.lastName||""),h((i?.user?.identities||[]).map(e=>({provider:e.provider,identityId:e.identity_id,email:e.identity_data?.email||i?.user?.email||null}))),d(!1)})()},[]);let z=async(e=!1)=>{if(!a)return;y(null),g(null);let{error:t}=await a.auth.signOut({scope:e?"global":"local"});t?y(t.message):(g(e?"Logout da tutti i dispositivi eseguito":"Logout eseguito"),s.push("/login"))},N=async()=>{if(!a)return;if(v.length<6)return void y("La password deve avere almeno 6 caratteri");y(null),g(null);let{error:e}=await a.auth.updateUser({password:v});e?y(e.message):g("Password aggiornata")},_=async()=>{if(a){y(null),g(null);try{let e=`${j||""} ${w||""}`.trim(),{error:t}=await a.auth.updateUser({data:{first_name:j||null,last_name:w||null,full_name:e||null}});if(t)return void y(t.message||"Errore aggiornamento profilo");let{data:l}=await a.auth.getUser();u(l?.user||null),g("Profilo aggiornato")}catch(e){y(e?.message||"Errore")}}},A=p.some(e=>"email"===e.provider);return o?(0,t.jsx)("div",{style:r.page,children:"Caricamento account..."}):c?(0,t.jsxs)("div",{style:r.page,children:[(0,t.jsxs)("div",{style:r.headerRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:r.title,children:"Il mio account"}),(0,t.jsx)("p",{style:r.muted,children:"Gestisci dati personali, sicurezza e preferenze"})]}),(0,t.jsx)("button",{style:r.ghostButton,onClick:()=>s.push("/"),children:"â† Torna all'app"})]}),(0,t.jsxs)("div",{style:r.grid,children:[(0,t.jsxs)("div",{style:r.card,children:[(0,t.jsx)("h2",{style:r.cardTitle,children:"ðŸ‘¤ Dati personali"}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Nome"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,t.jsx)("input",{value:j,onChange:e=>b(e.target.value),placeholder:"Nome",style:{...r.input,width:"140px"}}),(0,t.jsx)("input",{value:w,onChange:e=>C(e.target.value),placeholder:"Cognome",style:{...r.input,width:"180px"}}),(0,t.jsx)("button",{style:r.primaryButton,onClick:_,children:"Salva"})]})]}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Nome completo"}),(0,t.jsx)("div",{style:r.value,children:c.user_metadata?.full_name||`${j} ${w}`.trim()||"â€”"})]}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Email"}),(0,t.jsx)("div",{style:r.value,children:c.email||"â€”"})]}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Foto profilo"}),(0,t.jsx)("div",{style:r.value,children:"Usa il provider collegato (Google/Apple)"})]})]}),(0,t.jsxs)("div",{style:r.card,children:[(0,t.jsx)("h2",{style:r.cardTitle,children:"ðŸ” Sicurezza"}),(0,t.jsxs)("div",{style:r.subsection,children:[(0,t.jsx)("div",{style:r.subLabel,children:"Provider collegati"}),(0,t.jsxs)("ul",{style:{paddingLeft:"1rem",margin:0},children:[0===p.length&&(0,t.jsx)("li",{style:r.muted,children:"Nessun provider trovato"}),p.map(e=>{var l;return(0,t.jsxs)("li",{style:r.value,children:["google"===(l=e.provider)?"Google":"apple"===l?"Apple":"email"===l?"Email/Password":l," ",e.email?`(${e.email})`:""]},e.identityId||e.provider)})]})]}),A?(0,t.jsxs)("div",{style:r.subsection,children:[(0,t.jsx)("div",{style:r.subLabel,children:"Cambia password"}),(0,t.jsx)("input",{type:"password",placeholder:"Nuova password",value:v,onChange:e=>f(e.target.value),style:r.input}),(0,t.jsx)("button",{style:r.primaryButton,onClick:N,children:"Aggiorna password"})]}):(0,t.jsxs)("div",{style:r.subsection,children:[(0,t.jsx)("div",{style:r.subLabel,children:"Cambia password"}),(0,t.jsx)("div",{style:r.muted,children:"Non disponibile per i provider social (Google/Apple)"})]}),(0,t.jsxs)("div",{style:r.buttonsRow,children:[(0,t.jsx)("button",{style:r.secondaryButton,onClick:()=>z(!1),children:"Logout"}),(0,t.jsx)("button",{style:r.ghostButton,onClick:()=>z(!0),children:"Logout da tutti i dispositivi"})]}),(0,t.jsxs)("div",{style:r.subsection,children:[(0,t.jsx)("div",{style:r.subLabel,children:"Cancella account"}),(0,t.jsx)("div",{style:r.muted,children:"Contatta il supporto per la cancellazione definitiva."})]})]}),(0,t.jsxs)("div",{style:r.card,children:[(0,t.jsx)("h2",{style:r.cardTitle,children:"âš™ï¸ Preferenze"}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Tema"}),(0,t.jsxs)("select",{style:r.select,value:R,onChange:e=>S(e.target.value),children:[(0,t.jsx)("option",{value:"dark",children:"Scuro"}),(0,t.jsx)("option",{value:"light",children:"Chiaro"})]})]}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Lingua"}),(0,t.jsxs)("select",{style:r.select,value:k,onChange:e=>B(e.target.value),children:[(0,t.jsx)("option",{value:"it",children:"Italiano"}),(0,t.jsx)("option",{value:"en",children:"English"})]})]}),(0,t.jsxs)("div",{style:r.fieldRow,children:[(0,t.jsx)("div",{style:r.label,children:"Notifiche"}),(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:T,onChange:e=>L(e.target.checked)}),(0,t.jsx)("span",{style:r.value,children:"Attive"})]})]})]})]}),(m||x)&&(0,t.jsx)("div",{style:{...r.card,borderColor:x?"#4d1a1a":"#1a4d1a"},children:(0,t.jsx)("div",{style:{color:x?"#ff6b6b":"#44ff44"},children:x||m})})]}):(0,t.jsx)("div",{style:r.page,children:(0,t.jsxs)("div",{style:r.card,children:[(0,t.jsx)("h1",{style:r.title,children:"Account"}),(0,t.jsx)("p",{style:r.muted,children:"Non sei autenticato."}),(0,t.jsx)("button",{style:r.primaryButton,onClick:()=>s.push("/login"),children:"Vai al login"})]})})}let r={page:{minHeight:"100vh",background:"#0a0a0a",color:"#fff",padding:"2rem",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},headerRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.8rem"},muted:{color:"#888",margin:0},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"1rem"},card:{background:"#1a1a1a",border:"1px solid #333",borderRadius:"10px",padding:"1.25rem"},cardTitle:{marginTop:0,marginBottom:"1rem"},fieldRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #222"},label:{color:"#aaa",fontSize:"0.9rem"},value:{color:"#fff",fontSize:"0.95rem"},subLabel:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.35rem"},subsection:{marginTop:"0.75rem",borderTop:"1px solid #222",paddingTop:"0.75rem"},buttonsRow:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},primaryButton:{background:"#0066ff",color:"#fff",border:"none",padding:"0.6rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},secondaryButton:{background:"#333",color:"#fff",border:"1px solid #444",padding:"0.6rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},ghostButton:{background:"transparent",color:"#999",border:"1px solid #333",padding:"0.6rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},input:{width:"100%",padding:"0.65rem",borderRadius:"6px",border:"1px solid #333",background:"#0a0a0a",color:"#fff",marginBottom:"0.5rem"},select:{background:"#0a0a0a",color:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"0.45rem",minWidth:"140px"}};e.s(["default",()=>s])},21933,e=>{e.v(e=>Promise.resolve().then(()=>e(53210)))}]);