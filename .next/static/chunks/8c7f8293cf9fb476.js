(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},65760,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566);function a(){let[a,s]=(0,r.useState)(null),[l,n]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[u,h]=(0,r.useState)("Other"),[c,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(""),f=(0,i.useRouter)();(0,r.useEffect)(()=>{e.A(21933).then(e=>{s(e.getSupabaseClient())})},[]);let v=async e=>{if(e.preventDefault(),a){p(!0),m("");try{let{data:{user:e}}=await a.auth.getUser();if(!e){m("You must be signed in to complete your profile."),p(!1),f.push("/login");return}let{error:t}=await a.auth.updateUser({data:{first_name:l,last_name:o,role:u}});if(t)throw t;m("Profile saved. Redirecting…"),setTimeout(()=>f.push("/"),900)}catch(e){console.error("[CompleteProfile] Error saving profile",e),m(e?.message||"Error saving profile")}finally{p(!1)}}};return(0,t.jsxs)("div",{style:{padding:20,maxWidth:600,margin:"40px auto"},children:[(0,t.jsx)("h2",{children:"Complete your profile"}),(0,t.jsx)("p",{children:"Please enter your name and choose your professional role."}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)("div",{style:{marginBottom:12},children:[(0,t.jsx)("label",{children:"First name"}),(0,t.jsx)("input",{value:l,onChange:e=>n(e.target.value),required:!0,style:{width:"100%",padding:8}})]}),(0,t.jsxs)("div",{style:{marginBottom:12},children:[(0,t.jsx)("label",{children:"Last name"}),(0,t.jsx)("input",{value:o,onChange:e=>d(e.target.value),required:!0,style:{width:"100%",padding:8}})]}),(0,t.jsxs)("div",{style:{marginBottom:12},children:[(0,t.jsx)("label",{children:"Role"}),(0,t.jsx)("select",{value:u,onChange:e=>h(e.target.value),style:{width:"100%",padding:8},children:["Producer","Editor","Sound Designer","Director","Other"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsx)("button",{type:"submit",disabled:c,style:{padding:"10px 16px"},children:c?"Saving…":"Save profile"})]}),g&&(0,t.jsx)("div",{style:{marginTop:12},children:g})]})}e.s(["default",()=>a])},21933,e=>{e.v(t=>Promise.all(["static/chunks/5e12cd52e6f0e646.js"].map(t=>e.l(t))).then(()=>t(53210)))}]);